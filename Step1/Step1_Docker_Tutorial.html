<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 1 è©³ç´°ã‚¬ã‚¤ãƒ‰: åˆã‚ã¦ã®Dockerfile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: "Docker Lab". Background: Warm Neutral (#f8fafc). Accents: Docker Blue (#2563eb) & Terminal Dark (#1e293b). Text: Slate (#334155). -->
    <!-- Application Structure Plan:
         1. **Lab Header**: Title and progress indicator.
         2. **Interactive Workbench (Main Area)**:
            - **Sidebar**: Step navigation (Preparation -> Code -> Build -> Verify -> Update -> Cleanup).
            - **Workspace**: Dynamic content area changing based on the step.
         3. **Key Interactions**:
            - **Virtual Editor**: Tabs to view index.html and Dockerfile.
            - **Virtual Terminal**: A simulated console where users click "Run" to see simulated Docker output animations.
            - **Virtual Browser**: A preview frame showing the result of the containerized app.
            - **Layer Visualization**: Chart.js doughnut chart to visually explain `FROM` and `COPY` (Image composition).
         4. **Context**: Each section wraps the source report text in a "Do-it-yourself" wrapper, transforming static instructions into active tasks.
    -->
    <!-- Visualization & Content Choices:
         - **Image Composition Chart**: Doughnut Chart (Chart.js). Goal: Inform/Organize. Shows how `FROM nginx:alpine` takes up space vs `COPY index.html`. Justification: Helps beginners visualize what an "Image" is made of.
         - **Virtual Terminal**: HTML/JS Simulation. Goal: Change/Experience. Users "execute" commands defined in the source report.
         - **Port Forwarding Diagram**: CSS/HTML Visual. Goal: Inform. Shows the connection between Host 8080 and Container 80.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }
        .font-mono {
            font-family: 'Fira Code', monospace;
        }
        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        /* Terminal Animations */
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        .typing-effect {
            overflow: hidden;
            white-space: nowrap;
            border-right: 2px solid transparent;
            animation: typing 2s steps(40, end);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in forwards;
            opacity: 0;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        .step-btn.active {
            background-color: #eff6ff;
            border-left: 4px solid #2563eb;
            color: #1e40af;
        }
        .step-btn {
            border-left: 4px solid transparent;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 z-10 flex-none">
        <div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3 sm:py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2 sm:space-x-3">
                <span class="text-2xl sm:text-3xl">ğŸ³</span>
                <div>
                    <h1 class="text-base sm:text-xl font-bold text-slate-800 leading-tight sm:leading-none">Step 1: åˆã‚ã¦ã®Dockerfile</h1>
                    <p class="text-xs text-slate-500 mt-0.5 sm:mt-1 hidden sm:block">Webã‚µãƒ¼ãƒãƒ¼èµ·å‹•ãƒãƒ³ã‚ºã‚ªãƒ³ãƒ©ãƒœ</p>
                </div>
            </div>
            <div class="hidden md:block">
                <div class="flex items-center space-x-2 text-sm text-slate-500">
                    <span>Progress:</span>
                    <div class="w-32 h-2 bg-slate-100 rounded-full overflow-hidden">
                        <div id="progress-bar" class="h-full bg-blue-600 transition-all duration-500" style="width: 0%"></div>
                    </div>
                    <span id="progress-text">0%</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Workspace -->
    <div class="flex-grow flex flex-col-reverse md:flex-row md:overflow-hidden max-w-7xl mx-auto w-full">
        
        <!-- Sidebar Navigation -->
        <nav class="w-full md:w-64 bg-white border-t md:border-t-0 md:border-r border-slate-200 flex-none overflow-y-auto z-10">
            <div class="p-2 md:p-4 space-y-1 flex flex-wrap md:flex-col md:space-y-1 gap-1 md:gap-0">
                <button onclick="loadStep(0)" class="step-btn text-left px-2 md:px-4 py-2 md:py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex flex-col md:flex-row items-center md:justify-between text-xs md:text-base flex-1 md:flex-none md:w-full min-w-[80px]" id="btn-step-0">
                    <span class="md:inline">1. æº–å‚™</span>
                    <span class="text-xs bg-slate-100 px-1 md:px-2 py-0.5 rounded text-slate-400 mt-1 md:mt-0">Ready</span>
                </button>
                <button onclick="loadStep(1)" class="step-btn text-left px-2 md:px-4 py-2 md:py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex flex-col md:flex-row items-center md:justify-between text-xs md:text-base flex-1 md:flex-none md:w-full min-w-[80px]" id="btn-step-1">
                    <span class="md:inline">2. ãƒ•ã‚¡ã‚¤ãƒ«</span>
                    <span class="text-xs bg-slate-100 px-1 md:px-2 py-0.5 rounded text-slate-400 mt-1 md:mt-0">Edit</span>
                </button>
                <button onclick="loadStep(2)" class="step-btn text-left px-2 md:px-4 py-2 md:py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex flex-col md:flex-row items-center md:justify-between text-xs md:text-base flex-1 md:flex-none md:w-full min-w-[80px]" id="btn-step-2">
                    <span class="md:inline">3. ã‚³ãƒãƒ³ãƒ‰</span>
                    <span class="text-xs bg-slate-100 px-1 md:px-2 py-0.5 rounded text-slate-400 mt-1 md:mt-0">Term</span>
                </button>
                <button onclick="loadStep(3)" class="step-btn text-left px-2 md:px-4 py-2 md:py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex flex-col md:flex-row items-center md:justify-between text-xs md:text-base flex-1 md:flex-none md:w-full min-w-[80px]" id="btn-step-3">
                    <span class="md:inline">4. ç¢ºèª</span>
                    <span class="text-xs bg-slate-100 px-1 md:px-2 py-0.5 rounded text-slate-400 mt-1 md:mt-0">Web</span>
                </button>
                <button onclick="loadStep(4)" class="step-btn text-left px-2 md:px-4 py-2 md:py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex flex-col md:flex-row items-center md:justify-between text-xs md:text-base flex-1 md:flex-none md:w-full min-w-[80px]" id="btn-step-4">
                    <span class="md:inline">5. æ›´æ–°</span>
                    <span class="text-xs bg-slate-100 px-1 md:px-2 py-0.5 rounded text-slate-400 mt-1 md:mt-0">Cycle</span>
                </button>
                <button onclick="loadStep(5)" class="step-btn text-left px-2 md:px-4 py-2 md:py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex flex-col md:flex-row items-center md:justify-between text-xs md:text-base flex-1 md:flex-none md:w-full min-w-[80px]" id="btn-step-5">
                    <span class="md:inline">6. ç‰‡ä»˜ã‘</span>
                    <span class="text-xs bg-slate-100 px-1 md:px-2 py-0.5 rounded text-slate-400 mt-1 md:mt-0">Clean</span>
                </button>
            </div>
            
            <div class="p-2 md:p-4 mt-2 md:mt-4 border-t border-slate-100 hidden md:block">
                <div class="bg-blue-50 p-3 rounded text-sm text-blue-800">
                    <p class="font-bold mb-1">ğŸ’¡ ãƒ’ãƒ³ãƒˆ</p>
                    <p id="step-hint">å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å­¦ç¿’ã‚’é€²ã‚ã¾ã—ã‚‡ã†ã€‚</p>
                </div>
            </div>
        </nav>

        <!-- Content Area -->
        <main class="flex-grow bg-slate-50 p-3 sm:p-4 md:p-8 relative pb-4 md:overflow-y-auto" id="main-content">
            <!-- Dynamic Content injected here -->
        </main>

    </div>

    <!-- Scripts -->
    <script>
        // --- DATA & CONTENT ---
        const tutorialSteps = [
            {
                id: "prep",
                title: "1. æº–å‚™ã™ã‚‹ã‚‚ã®",
                content: `
                    <div class="max-w-3xl mx-auto space-y-8 animate-fade-in">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">é–‹ç™ºç’°å¢ƒã®ç¢ºèª</h2>
                            <p class="text-lg text-slate-600 mb-6">
                                ã‚³ãƒ³ãƒ†ãƒŠé–‹ç™ºã‚’å§‹ã‚ã‚‹å‰ã«ã€æ‰‹å…ƒã®PCç’°å¢ƒã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚
                                ä»¥ä¸‹ã®3ã¤ãŒæƒã£ã¦ã„ã‚Œã°æº–å‚™å®Œäº†ã§ã™ã€‚
                            </p>
                        </div>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6">
                            <div class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-slate-200 text-center hover:shadow-md transition-shadow">
                                <div class="text-4xl mb-4">ğŸ³</div>
                                <h3 class="font-bold text-lg mb-2">Docker Desktop</h3>
                                <p class="text-sm text-slate-500 mb-4">ç”»é¢å³ä¸Šã®ã‚¯ã‚¸ãƒ©ã‚¢ã‚¤ã‚³ãƒ³ã¯è¦‹ãˆã¦ã„ã¾ã™ã‹ï¼Ÿ</p>
                                <div class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">å¿…é ˆ</div>
                            </div>
                            
                            <div class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-slate-200 text-center hover:shadow-md transition-shadow">
                                <div class="text-4xl mb-4">ğŸ’»</div>
                                <h3 class="font-bold text-lg mb-2">ã‚¿ãƒ¼ãƒŸãƒŠãƒ«</h3>
                                <p class="text-sm text-slate-500 mb-4">Win: PowerShell<br>Mac: Terminal</p>
                                <div class="inline-block bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full">å¿…é ˆ</div>
                            </div>
                            
                            <div class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-slate-200 text-center hover:shadow-md transition-shadow">
                                <div class="text-4xl mb-4">ğŸ“</div>
                                <h3 class="font-bold text-lg mb-2">ã‚¨ãƒ‡ã‚£ã‚¿</h3>
                                <p class="text-sm text-slate-500 mb-4">VS Codeæ¨å¥¨ã§ã™ãŒã€ãƒ¡ãƒ¢å¸³ã§ã‚‚OKã§ã™ã€‚</p>
                                <div class="inline-block bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded-full">è‡ªç”±</div>
                            </div>
                        </div>

                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <span class="text-yellow-400 text-xl">âš ï¸</span>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm text-yellow-700">
                                        ã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„å ´åˆã¯ã€å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰Docker Desktopã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚
                                    </p>
                                    <div class="mt-2 flex flex-wrap gap-2">
                                        <a href="https://www.docker.com/products/docker-desktop/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-xs bg-blue-600 hover:bg-blue-700 text-white font-semibold py-1.5 px-3 rounded transition-colors">
                                            <span class="mr-1">ğŸ³</span> Docker Desktop (å…¬å¼)
                                        </a>
                                        <a href="https://docs.docker.com/desktop/install/windows-install/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-xs bg-slate-600 hover:bg-slate-700 text-white font-semibold py-1.5 px-3 rounded transition-colors">
                                            Windowsç‰ˆ
                                        </a>
                                        <a href="https://docs.docker.com/desktop/install/mac-install/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-xs bg-slate-600 hover:bg-slate-700 text-white font-semibold py-1.5 px-3 rounded transition-colors">
                                            Macç‰ˆ
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="text-center pt-8">
                            <button onclick="loadStep(1)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all transform hover:scale-105">
                                æº–å‚™OKï¼æ¬¡ã¸é€²ã‚€
                            </button>
                        </div>
                    </div>
                `,
                hint: "DockerãŒå‹•ã„ã¦ã„ã‚‹ã‹ä¸å®‰ãªå ´åˆã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ `docker --version` ã¨æ‰“ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"
            },
            {
                id: "files",
                title: "2. ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ",
                content: `
                    <div class="max-w-4xl mx-auto space-y-6 animate-fade-in">
                        <div class="flex justify-between items-end">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800">ãƒ•ã‚©ãƒ«ãƒ€ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ</h2>
                                <p class="text-slate-600 mt-2">ä½œæ¥­ç”¨ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆä¾‹: <code>my-first-container</code>ï¼‰ã‚’ä½œã‚Šã€ä»¥ä¸‹ã®2ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-8">
                            <!-- Virtual Editor -->
                            <div class="bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col h-[400px] md:h-[500px]">
                                <div class="flex bg-gray-900 text-gray-400 text-xs font-mono border-b border-gray-700">
                                    <button onclick="switchTab('html')" id="tab-html" class="px-4 py-2 bg-gray-800 text-gray-200 border-t-2 border-blue-500">index.html</button>
                                    <button onclick="switchTab('docker')" id="tab-docker" class="px-4 py-2 hover:bg-gray-700 border-t-2 border-transparent">Dockerfile</button>
                                </div>
                                <div class="p-2 md:p-4 overflow-auto flex-grow font-mono text-xs md:text-sm text-gray-300 relative group">
                                    <button onclick="copyCode()" class="absolute top-4 right-4 bg-gray-700 hover:bg-gray-600 text-white px-2 py-1 rounded text-xs opacity-0 group-hover:opacity-100 transition-opacity">Copy</button>
                                    <button onclick="downloadFile()" class="absolute top-4 right-20 bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs opacity-0 group-hover:opacity-100 transition-opacity">Download</button>
                                    <pre id="code-display" class="language-html"></pre>
                                </div>
                            </div>

                            <!-- Explanation & Viz -->
                            <div class="space-y-6 flex flex-col">
                                <div id="explanation-box" class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex-grow">
                                    <!-- Dynamic explanation injected here -->
                                </div>
                                
                                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                                    <h4 class="font-bold text-slate-700 mb-2 text-sm text-center">Dockerfileã®æ§‹æˆã‚¤ãƒ¡ãƒ¼ã‚¸</h4>
                                    <div class="chart-container">
                                        <canvas id="layerChart"></canvas>
                                    </div>
                                    <p class="text-xs text-center text-slate-400 mt-2">ä¸‹ã‹ã‚‰é †ã«ç©ã¿é‡ãªã‚‹ã€Œãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ ã€ã§ã™ã€‚<br>ä¸€ç•ªä¸ŠãŒã‚ãªãŸã®ä½œã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚</p>
                                </div>
                            </div>
                        </div>
                        <!-- File Placement Guide -->
                        <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                            <h3 class="font-bold text-slate-700 mb-2">ãƒ•ã‚¡ã‚¤ãƒ«ã®ç½®ãå ´æ‰€</h3>
                            <p class="text-sm text-slate-600 mb-3">ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€<strong>åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ç›´ä¸‹</strong>ã« <code>Dockerfile</code> ã¨ <code>index.html</code> ã‚’é…ç½®ã—ã¾ã™ã€‚</p>
                            <div class="space-y-2">
                                <div>
                                    <p class="text-xs text-slate-500 mb-1">æ¨å¥¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆä¾‹ï¼‰</p>
                                    <code class="block bg-slate-100 p-2 rounded text-xs select-all">my-first-container/\nâ”œâ”€â”€ Dockerfile\nâ””â”€â”€ index.html</code>
                                </div>
                                <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                                    <li><span class="font-mono">Dockerfile</span> ã¯æ‹¡å¼µå­ãªã—ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ç›´ä¸‹ã«é…ç½®ã—ã¦ãã ã•ã„ã€‚</li>
                                    <li><span class="font-mono">index.html</span> ã¯ <span class="font-mono">Dockerfile</span> ã¨åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ç½®ãã¾ã™ã€‚</li>
                                    <li>Step 3 ã® <span class="font-mono">docker build -t my-web-server .</span> ã®ã€Œ<span class="font-mono">.</span>ã€ã¯ã€<strong>ãã®ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰</strong>ã‚’æ„å‘³ã—ã¾ã™ã€‚</li>
                                </ul>
                                <p class="text-xs text-slate-500 mt-2">VS Codeã‚’ä½¿ã†å ´åˆã¯ã€å…ˆã«ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆä¾‹: <span class="font-mono">my-first-container</span>ï¼‰ã‚’é–‹ã„ã¦ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã¨ã€ãƒ“ãƒ«ãƒ‰æ™‚ã®ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒæ­£ã—ããªã‚Šã¾ã™ã€‚</p>
                            </div>
                        </div>

                        <div class="text-right">
                             <button onclick="loadStep(2)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition-colors">
                                ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå®Œäº†ï¼æ¬¡ã¸ â†’
                            </button>
                        </div>
                    </div>
                `,
                hint: "Dockerfileã®ã€ŒDã€ã¯å¤§æ–‡å­—ï¼†æ‹¡å¼µå­ãªã—ã€‚åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ç›´ä¸‹ã« index.html ã¨é…ç½®ã—ã¦ãã ã•ã„ã€‚"
            },
            {
                id: "commands",
                title: "3. ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ",
                content: `
                    <div class="max-w-4xl mx-auto space-y-8 animate-fade-in">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã®æ“ä½œ</h2>
                            <p class="text-slate-600 mt-2">ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å…ƒã«ã€å®Ÿéš›ã«ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ä½“é¨“ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                        </div>

                        <!-- Open Terminal Tips (Windows) -->
                        <div class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-slate-200">
                            <h3 class="font-bold text-lg text-slate-800 mb-2">ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®é–‹ãæ–¹ï¼ˆWindowsï¼ã‚³ãƒãƒ³ãƒ‰ï¼‰</h3>
                            <p class="text-sm text-slate-600 mb-3">ã‚³ãƒãƒ³ãƒ‰ã§æ–°ã—ãã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼ˆã‚·ã‚§ãƒ«ï¼‰ã‚’èµ·å‹•ã™ã‚‹æ–¹æ³•ã§ã™ã€‚</p>
                            <div class="space-y-2">
                                <div>
                                    <p class="text-xs text-slate-500 mb-1">PowerShell ã‚’èµ·å‹•</p>
                                    <code class="block bg-slate-100 p-2 rounded text-xs select-all">start powershell</code>
                                </div>
                                <div>
                                    <p class="text-xs text-slate-500 mb-1">ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ ã‚’èµ·å‹•</p>
                                    <code class="block bg-slate-100 p-2 rounded text-xs select-all">start cmd</code>
                                </div>
                                <div>
                                    <p class="text-xs text-slate-500 mb-1">Windows Terminal ã‚’èµ·å‹•ï¼ˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®å ´åˆï¼‰</p>
                                    <code class="block bg-slate-100 p-2 rounded text-xs select-all">wt</code>
                                </div>
                                <div class="text-xs text-slate-500 mt-2">
                                    ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ç›®çš„ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ãã€ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã«ã€Œpowershellã€ã¨å…¥åŠ›ã—ã¦ Enter ã§ã‚‚ã€ãã®ãƒ•ã‚©ãƒ«ãƒ€ä½ç½®ã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã‘ã¾ã™ã€‚
                                </div>
                            </div>
                        </div>

                        <!-- VS Code Integrated Terminal Tips -->
                        <div class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-slate-200">
                            <h3 class="font-bold text-lg text-slate-800 mb-2">VS Code çµ±åˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®é–‹ãæ–¹</h3>
                            <div class="space-y-2 text-sm text-slate-600">
                                <div>
                                    <p class="font-bold text-slate-700">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰é–‹ã</p>
                                    <p>ä¸Šéƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€Œè¡¨ç¤ºã€ â†’ ã€Œã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã€ã‚’é¸æŠã€‚</p>
                                </div>
                                <div>
                                    <p class="font-bold text-slate-700">ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ</p>
                                    <ul class="list-disc list-inside text-sm">
                                        <li>è¡¨ç¤º/éè¡¨ç¤ºã®åˆ‡ã‚Šæ›¿ãˆ: <span class="font-mono">Ctrl + &#96;</span></li>
                                        <li>æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ä½œæˆ: <span class="font-mono">Ctrl + Shift + &#96;</span></li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="font-bold text-slate-700">ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆ</p>
                                    <p><span class="font-mono">F1</span> ã¾ãŸã¯ <span class="font-mono">Ctrl + Shift + P</span> â†’ ã€Œã‚¿ãƒ¼ãƒŸãƒŠãƒ«: æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ä½œæˆã€ã‚’å®Ÿè¡Œã€‚</p>
                                </div>
                                <div>
                                    <p class="font-bold text-slate-700">ã‚·ã‚§ãƒ«ã®é¸æŠ</p>
                                    <p>ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ‘ãƒãƒ«ã®å³ä¸Šãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰ <span class="font-mono">PowerShell</span> / <span class="font-mono">Command Prompt</span> ãªã©ã‚’é¸æŠå¯èƒ½ã€‚</p>
                                </div>
                                <div>
                                    <p class="font-bold text-slate-700">ãƒ•ã‚©ãƒ«ãƒ€ä½ç½®ã§é–‹ã / ç§»å‹•</p>
                                    <p>VS Codeã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã„ãŸçŠ¶æ…‹ã§çµ±åˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã¨ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒãã®ãƒ•ã‚©ãƒ«ãƒ€ã«ãªã‚Šã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ <span class="font-mono">cd</span> ã§ç§»å‹•:</p>
                                    <code class="block bg-slate-100 p-2 rounded text-xs select-all">cd my-first-container</code>
                                </div>
                            </div>
                        </div>

                        <!-- Terminal Simulator -->
                        <div class="bg-gray-900 rounded-lg shadow-2xl p-1 border border-gray-700 font-mono text-xs md:text-sm text-gray-300">
                            <div class="flex items-center px-2 md:px-4 py-2 bg-gray-800 rounded-t border-b border-gray-700 mb-2">
                                <div class="flex space-x-1 md:space-x-2 mr-2 md:mr-4">
                                    <div class="w-2 h-2 md:w-3 md:h-3 rounded-full bg-red-500"></div>
                                    <div class="w-2 h-2 md:w-3 md:h-3 rounded-full bg-yellow-500"></div>
                                    <div class="w-2 h-2 md:w-3 md:h-3 rounded-full bg-green-500"></div>
                                </div>
                                <span class="text-xs text-gray-400">Terminal - my-first-container</span>
                            </div>
                            <div class="p-2 md:p-4 h-64 md:h-96 overflow-y-auto" id="terminal-output">
                                <div class="mb-2">user@pc:~/my-first-container$ <span class="animate-pulse">_</span></div>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                            <div class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-slate-200">
                                <h3 class="font-bold text-lg text-blue-700 mb-2">æ‰‹é †1: ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰</h3>
                                <p class="text-sm text-slate-600 mb-4">ãƒ¬ã‚·ãƒ”(Dockerfile)ã‹ã‚‰æ–™ç†(Image)ã‚’ä½œã‚Šã¾ã™ã€‚</p>
                                <code class="block bg-slate-100 p-2 rounded text-xs mb-4 select-all">docker build -t my-web-server .</code>
                                <button onclick="runTerminal('build')" class="w-full bg-slate-800 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded flex justify-center items-center">
                                    <span class="mr-2">â–¶</span> å®Ÿè¡Œ (Build)
                                </button>
                                <p class="text-xs text-slate-400 mt-2">â€» æœ€å¾Œã®ã€Œ.ã€ã‚’å¿˜ã‚Œãšã«ï¼</p>
                            </div>

                            <div class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-slate-200 opacity-50 pointer-events-none" id="run-control">
                                <h3 class="font-bold text-lg text-green-700 mb-2">æ‰‹é †2: ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•</h3>
                                <p class="text-sm text-slate-600 mb-4">ä½œã£ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p>
                                <code class="block bg-slate-100 p-2 rounded text-xs mb-4 select-all">docker run -d -p 8080:80 my-web-server</code>
                                <button onclick="runTerminal('run')" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded flex justify-center items-center">
                                    <span class="mr-2">â–¶</span> å®Ÿè¡Œ (Run)
                                </button>
                                <p class="text-xs text-slate-400 mt-2">ãƒãƒ¼ãƒˆ8080(PC) â†’ 80(ã‚³ãƒ³ãƒ†ãƒŠ)ã¸è»¢é€</p>
                            </div>
                        </div>
                    </div>
                `,
                hint: "ã¾ãšã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã¾ã—ã‚‡ã†ï¼ˆä¾‹: 'start powershell' ã‚„ VS Codeãªã‚‰ Ctrl+`ï¼‰ã€‚æ¬¡ã«ã€docker buildã€ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ä½œæˆã€ã€docker runã€ã§èµ·å‹•ã¨ã„ã†2æ®µéšãŒåŸºæœ¬ã§ã™ã€‚"
            },
            {
                id: "verify",
                title: "4. å‹•ä½œç¢ºèª",
                content: `
                    <div class="max-w-4xl mx-auto space-y-8 animate-fade-in">
                         <div class="text-center">
                            <h2 class="text-2xl font-bold text-slate-800">ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªã—ã‚ˆã†</h2>
                            <p class="text-slate-600 mt-2">
                                èµ·å‹•ãŒæˆåŠŸã—ã¦ã„ã‚Œã°ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ 
                                <a href="#" class="text-blue-600 hover:underline font-mono font-bold">http://localhost:8080</a> 
                                ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
                            </p>
                        </div>

                        <!-- Virtual Browser -->
                        <div class="bg-slate-200 rounded-lg shadow-xl overflow-hidden border border-slate-300 max-w-2xl mx-auto">
                            <!-- Browser Chrome -->
                            <div class="bg-gray-100 border-b border-gray-300 px-2 md:px-4 py-2 flex items-center space-x-2 md:space-x-4">
                                <div class="flex space-x-1 md:space-x-1">
                                    <div class="w-2 h-2 md:w-3 md:h-3 rounded-full bg-red-400"></div>
                                    <div class="w-2 h-2 md:w-3 md:h-3 rounded-full bg-yellow-400"></div>
                                    <div class="w-2 h-2 md:w-3 md:h-3 rounded-full bg-green-400"></div>
                                </div>
                                <div class="flex-grow bg-white rounded-md border border-gray-300 px-2 md:px-3 py-1 text-xs md:text-sm text-gray-600 font-mono flex items-center">
                                    <span class="text-gray-400 mr-1 md:mr-2 text-xs md:text-base">ğŸ”’</span> <span class="truncate">localhost:8080</span>
                                </div>
                                <button onclick="refreshBrowser()" class="text-gray-500 hover:text-gray-700">â†»</button>
                            </div>
                            
                            <!-- Browser Viewport -->
                            <div id="browser-viewport" class="bg-white h-[300px] md:h-[400px] w-full flex flex-col items-center pt-6 md:pt-10 transition-opacity duration-300 overflow-y-auto">
                                <!-- Content injected via JS -->
                                <div class="text-center p-4 md:p-8">
                                    <h1 class="text-xl md:text-3xl font-bold text-slate-800 mb-3 md:mb-4">ğŸ³ ã‚ˆã†ã“ãï¼ã‚³ãƒ³ãƒ†ãƒŠã®ä¸–ç•Œã¸</h1>
                                    <p class="text-sm md:text-base text-slate-600 mb-2">ã“ã‚Œã¯ç§ãŒåˆã‚ã¦Dockerfileã‹ã‚‰ä½œã£ãŸWebã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚</p>
                                    <p class="text-sm md:text-base text-blue-600 font-bold">ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã§ã“ã®HTMLãŒå‹•ã„ã¦ã„ã¾ã™ï¼</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-blue-50 border border-blue-100 p-6 rounded-xl max-w-2xl mx-auto">
                            <h3 class="font-bold text-blue-800 mb-2">ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h3>
                            <p class="text-sm text-blue-700">
                                ã‚ãªãŸã®PCä¸Šã§ã€Nginxã¨ã„ã†Webã‚µãƒ¼ãƒãƒ¼ãŒã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦éš”é›¢ã•ã‚ŒãŸçŠ¶æ…‹ã§å‹•ã„ã¦ã„ã¾ã™ã€‚<br>
                                è‡ªåˆ†ã®PCç’°å¢ƒã‚’æ±šã•ãšã«ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¡ä¸Šã’ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
                            </p>
                            <div class="mt-4 text-center">
                                <button onclick="loadStep(4)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition-colors">
                                    æ¬¡ã¸ï¼šå†…å®¹ã‚’å¤‰ãˆã¦ã¿ã‚‹
                                </button>
                            </div>
                        </div>
                    </div>
                `,
                hint: "è¡¨ç¤ºã•ã‚Œãªã„å ´åˆã¯ã€Step 3ã«æˆ»ã£ã¦ã€Œdocker runã€ã‚³ãƒãƒ³ãƒ‰ãŒã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
            },
            {
                id: "update",
                title: "5. å†…å®¹ã®å¤‰æ›´ï¼ˆå†ãƒ“ãƒ«ãƒ‰ï¼‰",
                content: `
                    <div class="max-w-4xl mx-auto space-y-6 animate-fade-in">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">ã‚‚ã—å†…å®¹ã‚’å¤‰æ›´ã—ãŸããªã£ãŸã‚‰ï¼Ÿ</h2>
                            <p class="text-slate-600 mt-2">ã‚³ãƒ³ãƒ†ãƒŠã¯<strong>ã€ŒImmutableï¼ˆä¸å¤‰ï¼‰ã€</strong>ã§ã™ã€‚å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆã¦ã‚‚ã€èµ·å‹•ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã«ã¯åæ˜ ã•ã‚Œã¾ã›ã‚“ã€‚</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8">
                            <!-- Code Editor for Edit -->
                            <div class="bg-gray-800 rounded-lg p-3 md:p-4 font-mono text-xs md:text-sm text-gray-300 flex flex-col">
                                <div class="text-xs text-gray-500 mb-2">index.html (ç·¨é›†ãƒ¢ãƒ¼ãƒ‰)</div>
                                <textarea id="edit-html-area" class="w-full h-32 md:h-40 bg-gray-900 text-green-300 p-2 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-xs md:text-sm"><!DOCTYPE html>
...
<body>
    <h1>ğŸš€ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæˆåŠŸï¼</h1>
    <p>å†ãƒ“ãƒ«ãƒ‰ã—ã¦å†…å®¹ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚</p>
</body>
</html></textarea>
                                <p class="text-xs text-gray-500 mt-2">â€» è‡ªç”±ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›¸ãæ›ãˆã¦ã¿ã¦ãã ã•ã„</p>
                            </div>

                            <!-- Explanation -->
                            <div class="space-y-4">
                                <div class="bg-white p-4 rounded-xl border border-slate-200">
                                    <h3 class="font-bold text-slate-700 mb-2">æ›´æ–°ã®æ‰‹é †</h3>
                                    <ol class="list-decimal list-inside text-sm text-slate-600 space-y-2">
                                        <li>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹</li>
                                        <li><code>docker build</code> ã§æ–°ã—ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œã‚‹</li>
                                        <li>å¤ã„ã‚³ãƒ³ãƒ†ãƒŠã‚’æ­¢ã‚ã¦å‰Šé™¤ã™ã‚‹</li>
                                        <li><code>docker run</code> ã§æ–°ã—ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å‹•ã‹ã™</li>
                                    </ol>
                                </div>
                                
                                <button onclick="performRebuildSimulation()" id="btn-rebuild" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded shadow transition-colors flex justify-center items-center">
                                    <span class="mr-2">ğŸ”„</span> å†ãƒ“ãƒ«ãƒ‰ï¼†å†èµ·å‹•ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
                                </button>
                                
                                <div id="rebuild-status" class="hidden bg-gray-900 text-green-400 p-3 rounded font-mono text-xs h-24 overflow-y-auto">
                                    <!-- Logs -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Result Preview -->
                        <div id="rebuild-result" class="hidden opacity-0 transition-opacity duration-500">
                            <h3 class="font-bold text-slate-700 mb-2 text-center">æ›´æ–°å¾Œã®ãƒ–ãƒ©ã‚¦ã‚¶è¡¨ç¤º</h3>
                            <div class="bg-white border border-gray-300 p-8 rounded-lg shadow-inner text-center max-w-md mx-auto">
                                <div id="updated-browser-content"></div>
                            </div>
                             <div class="mt-6 text-center">
                                <p class="text-sm text-slate-500 mb-4">ã€Œæ¯å›ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã®ã¯é¢å€’ï¼ã€ã¨æ„Ÿã˜ã¾ã—ãŸã‹ï¼Ÿãã‚ŒãŒæ­£å¸¸ã§ã™ã€‚<br>æ¬¡å›å­¦ã¶ <strong>Docker Compose</strong> ã§ãã®æ‰‹é–“ã‚’è§£æ¶ˆã§ãã¾ã™ã€‚</p>
                                <button onclick="loadStep(5)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition-colors">
                                    æœ€å¾Œã®æ‰‹é †ã¸
                                </button>
                            </div>
                        </div>
                    </div>
                `,
                hint: "ã‚³ãƒ³ãƒ†ãƒŠã¯ã€Œä½¿ã„æ¨ã¦ã€ãŒåŸºæœ¬æ€æƒ³ã§ã™ã€‚æ›´æ–°ã™ã‚‹æ™‚ã¯ã€ç¶™ãè¶³ã™ã®ã§ã¯ãªãã€Œä½œã‚Šç›´ã™ã€ã®ãŒä½œæ³•ã§ã™ã€‚"
            },
            {
                id: "clean",
                title: "6. ãŠç‰‡ä»˜ã‘",
                content: `
                    <div class="max-w-3xl mx-auto space-y-8 animate-fade-in">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">ã‚³ãƒ³ãƒ†ãƒŠã®åœæ­¢ã¨å‰Šé™¤</h2>
                            <p class="text-slate-600 mt-2">éŠã³çµ‚ã‚ã£ãŸã‚‰ã€èµ·å‹•ã—ãŸã¾ã¾ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ç‰‡ä»˜ã‘ã¾ã—ã‚‡ã†ã€‚</p>
                        </div>

                        <div class="bg-gray-900 rounded-lg shadow-lg border border-gray-700 font-mono text-sm text-gray-300 p-4">
                            <div class="space-y-4">
                                <div>
                                    <p class="text-gray-500"># 1. èµ·å‹•ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ç¢ºèª (IDã‚’ãƒã‚§ãƒƒã‚¯)</p>
                                    <div class="flex items-center">
                                        <span class="mr-2 text-green-400">$</span>
                                        <input type="text" value="docker ps" readonly class="bg-transparent outline-none w-full cursor-text text-white">
                                    </div>
                                    <div class="text-gray-400 mt-1 pl-4 border-l-2 border-gray-700 text-xs">
                                        CONTAINER ID &nbsp; IMAGE &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STATUS<br>
                                        <span class="text-yellow-300">a1b2c3d4</span> &nbsp;&nbsp;&nbsp;&nbsp; my-web-server &nbsp; Up 5 minutes
                                    </div>
                                </div>

                                <div>
                                    <p class="text-gray-500"># 2. ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ (IDã®å…ˆé ­ã‚’æŒ‡å®š)</p>
                                    <div class="flex items-center">
                                        <span class="mr-2 text-green-400">$</span>
                                        <span class="text-white">docker stop <span class="text-yellow-300">a1b2</span></span>
                                    </div>
                                    <div class="text-gray-400 mt-1 pl-4 text-xs">a1b2</div>
                                </div>

                                <div>
                                    <p class="text-gray-500"># 3. ã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤</p>
                                    <div class="flex items-center">
                                        <span class="mr-2 text-green-400">$</span>
                                        <span class="text-white">docker rm <span class="text-yellow-300">a1b2</span></span>
                                    </div>
                                    <div class="text-gray-400 mt-1 pl-4 text-xs">a1b2</div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-green-50 border border-green-100 p-8 rounded-xl text-center">
                            <h3 class="text-2xl font-bold text-green-800 mb-4">Step 1 ã‚¯ãƒªã‚¢ï¼ğŸ‰</h3>
                            <p class="text-green-700 mb-6">
                                ã‚ãªãŸã¯ã‚³ãƒ³ãƒ†ãƒŠã®åŸºæœ¬çš„ãªãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ï¼ˆä½œæˆãƒ»èµ·å‹•ãƒ»åœæ­¢ãƒ»å‰Šé™¤ï¼‰ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ãŸã€‚
                                æ¬¡ã¯ã€ã‚¢ãƒ—ãƒªã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’é€£æºã•ã›ã‚‹ã€ŒStep 2 & 3ã€ã«æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†ï¼
                            </p>
                            <a href="../index.html" class="inline-block bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-transform hover:scale-105">
                                ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã«æˆ»ã‚‹
                            </a>
                        </div>
                    </div>
                `,
                hint: "ã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤ã—ã¦ã‚‚ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆmy-web-serverï¼‰ã¯æ®‹ã£ã¦ã„ã¾ã™ã€‚å®Œå…¨ã«æ¶ˆã™ãªã‚‰ `docker rmi my-web-server` ã§ã™ã€‚"
            }
        ];

        const codeSnippets = {
            html: `<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Hello Docker!</title>
</head>
<body style="background-color: #f0f8ff; text-align: center; padding-top: 50px;">
    <h1>ğŸ³ ã‚ˆã†ã“ãï¼ã‚³ãƒ³ãƒ†ãƒŠã®ä¸–ç•Œã¸</h1>
    <p>ã“ã‚Œã¯ç§ãŒåˆã‚ã¦Dockerfileã‹ã‚‰ä½œã£ãŸWebã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚</p>
    <p>ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã§ã“ã®HTMLãŒå‹•ã„ã¦ã„ã¾ã™ï¼</p>
</body>
</html>`,
            docker: `# 1. ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹OSã¨ã‚½ãƒ•ãƒˆã‚’æŒ‡å®š
FROM nginx:alpine

# 2. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã‚³ãƒ”ãƒ¼
COPY ./index.html /usr/share/nginx/html/index.html`
        };

        const explanations = {
            html: `
                <h3 class="font-bold text-blue-700 mb-2">â‘  index.html</h3>
                <p class="text-sm text-slate-600 mb-4">ã“ã‚ŒãŒWebã‚µã‚¤ãƒˆã®æœ¬ä½“ã§ã™ã€‚ç‰¹ã«å¤‰ã‚ã£ãŸã¨ã“ã‚ã®ãªã„ã€æ™®é€šã®HTMLãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚</p>
                <p class="text-xs bg-slate-100 p-2 rounded">
                    <strong>Point:</strong> ã‚³ãƒ³ãƒ†ãƒŠé–‹ç™ºã§ã‚‚ã€ã‚¢ãƒ—ãƒªã®ã‚³ãƒ¼ãƒ‰ï¼ˆHTMLã‚„Pythonãªã©ï¼‰è‡ªä½“ã¯ã€æ™®æ®µæ›¸ã„ã¦ã„ã‚‹ã‚‚ã®ã¨åŒã˜ã§ã™ã€‚
                </p>
            `,
            docker: `
                <h3 class="font-bold text-blue-700 mb-2">â‘¡ Dockerfile</h3>
                <p class="text-sm text-slate-600 mb-4">ã“ã‚ŒãŒã‚³ãƒ³ãƒ†ãƒŠã®è¨­è¨ˆå›³ï¼ˆãƒ¬ã‚·ãƒ”ï¼‰ã§ã™ã€‚</p>
                <ul class="space-y-3 text-sm">
                    <li class="flex items-start">
                        <span class="font-mono bg-slate-200 px-1 rounded mr-2 text-xs">FROM</span>
                        <span>
                            <strong>ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸:</strong> <br>
                            ã€Œnginxå…¥ã‚Šè»½é‡Linux (alpine)ã€ã‚’åœŸå°ã«ã—ã¾ã™ã€‚<br>
                            <span class="text-xs text-slate-400">â€» ã“ã‚Œã ã‘ã§OSã¨Webã‚µãƒ¼ãƒãƒ¼ãŒç”¨æ„ã•ã‚Œã¾ã™ã€‚</span>
                        </span>
                    </li>
                    <li class="flex items-start">
                        <span class="font-mono bg-slate-200 px-1 rounded mr-2 text-xs">COPY</span>
                        <span>
                            <strong>ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®:</strong> <br>
                            PCä¸Šã® <code>index.html</code> ã‚’ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã®NginxãŒèª­ã¿è¾¼ã‚€å ´æ‰€ã¸ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚
                        </span>
                    </li>
                </ul>
            `
        };

        // --- APP STATE ---
        let currentStep = 0;

        // --- FUNCTIONS ---
        function loadStep(index) {
            currentStep = index;
            
            // Update UI
            document.querySelectorAll('.step-btn').forEach((btn, idx) => {
                if (idx === index) {
                    btn.classList.add('active');
                    btn.classList.remove('text-slate-600');
                    btn.classList.add('text-blue-700');
                } else {
                    btn.classList.remove('active');
                    btn.classList.add('text-slate-600');
                    btn.classList.remove('text-blue-700');
                }
            });

            // Update Progress Bar
            const progress = Math.round(((index) / (tutorialSteps.length - 1)) * 100);
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').innerText = `${progress}%`;

            // Inject Content
            const container = document.getElementById('main-content');
            container.innerHTML = tutorialSteps[index].content;
            document.getElementById('step-hint').innerText = tutorialSteps[index].hint;

            // Step-specific initializations
            if (index === 1) { // Files
                setTimeout(() => {
                    switchTab('html');
                    initLayerChart();
                }, 100);
            }
        }

        function switchTab(type) {
            const display = document.getElementById('code-display');
            const explain = document.getElementById('explanation-box');
            const tabHtml = document.getElementById('tab-html');
            const tabDocker = document.getElementById('tab-docker');

            display.textContent = codeSnippets[type];
            explain.innerHTML = explanations[type];

            if (type === 'html') {
                tabHtml.classList.add('bg-gray-800', 'text-gray-200', 'border-blue-500');
                tabHtml.classList.remove('hover:bg-gray-700', 'border-transparent');
                tabDocker.classList.remove('bg-gray-800', 'text-gray-200', 'border-blue-500');
                tabDocker.classList.add('hover:bg-gray-700', 'border-transparent');
            } else {
                tabDocker.classList.add('bg-gray-800', 'text-gray-200', 'border-blue-500');
                tabDocker.classList.remove('hover:bg-gray-700', 'border-transparent');
                tabHtml.classList.remove('bg-gray-800', 'text-gray-200', 'border-blue-500');
                tabHtml.classList.add('hover:bg-gray-700', 'border-transparent');
            }
        }

        function copyCode() {
            const code = document.getElementById('code-display').innerText;
            navigator.clipboard.writeText(code);
            alert("ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
        }

        function downloadFile() {
            const code = document.getElementById('code-display').innerText;
            const tabHtml = document.getElementById('tab-html');
            const isHtmlTab = tabHtml.classList.contains('bg-gray-800');
            
            const filename = isHtmlTab ? 'index.html' : 'Dockerfile';
            const element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(code));
            element.setAttribute('download', filename);
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }

        function initLayerChart() {
            const ctx = document.getElementById('layerChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Docker Image'],
                    datasets: [
                        {
                            label: 'Layer 1: Base OS (Alpine)',
                            data: [20],
                            backgroundColor: '#3b82f6', // Blue
                            barPercentage: 0.6
                        },
                        {
                            label: 'Layer 2: Middleware (Nginx)',
                            data: [25],
                            backgroundColor: '#10b981', // Green
                            barPercentage: 0.6
                        },
                        {
                            label: 'Layer 3: App (index.html)',
                            data: [15],
                            backgroundColor: '#f59e0b', // Yellow
                            barPercentage: 0.6
                        }
                    ]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    scales: {
                        x: { stacked: true, display: false },
                        y: { stacked: true, display: false }
                    },
                    plugins: {
                        legend: { 
                            position: 'right',
                            reverse: true // Show Top layer at top of legend
                        },
                        tooltip: {
                            callbacks: {
                                label: (ctx) => ctx.dataset.label,
                                afterLabel: (ctx) => {
                                    const descs = [
                                        ["FROM nginx:alpine", "åœŸå°ã¨ãªã‚‹è»½é‡Linux OSã€‚", "ã“ã“ã‹ã‚‰å…¨ã¦ãŒå§‹ã¾ã‚Šã¾ã™ã€‚"],
                                        ["apk add nginx", "Webã‚µãƒ¼ãƒãƒ¼æ©Ÿèƒ½ã€‚", "ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã«å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚"],
                                        ["COPY ./index.html", "ã‚ãªãŸãŒä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã€‚", "ä¸€ç•ªä¸Šã«ä¹—ã‚Šã¾ã™ã€‚"]
                                    ];
                                    return descs[ctx.datasetIndex];
                                }
                            }
                        }
                    }
                }
            });
        }

        function runTerminal(action) {
            const terminal = document.getElementById('terminal-output');
            
            if (action === 'build') {
                const logs = [
                    "Sending build context to Docker daemon  2.048kB",
                    "Step 1/2 : FROM nginx:alpine",
                    " ---> a1b2c3d4e5f6",
                    "Step 2/2 : COPY ./index.html /usr/share/nginx/html/index.html",
                    " ---> Using cache",
                    " ---> 7890abcdef12",
                    "Successfully built 7890abcdef12",
                    "Successfully tagged my-web-server:latest"
                ];
                
                let delay = 0;
                terminal.innerHTML += `<div class="text-green-400 mb-1">$ docker build -t my-web-server .</div>`;
                
                logs.forEach((log, i) => {
                    setTimeout(() => {
                        terminal.innerHTML += `<div class="text-gray-400 text-xs">${log}</div>`;
                        terminal.scrollTop = terminal.scrollHeight;
                    }, 500 * (i + 1));
                    delay = 500 * (i + 1);
                });

                setTimeout(() => {
                    terminal.innerHTML += `<div class="mb-2 mt-2">user@pc:~/my-first-container$ <span class="animate-pulse">_</span></div>`;
                    terminal.scrollTop = terminal.scrollHeight;
                    document.getElementById('run-control').classList.remove('opacity-50', 'pointer-events-none');
                }, delay + 500);

            } else if (action === 'run') {
                terminal.innerHTML += `<div class="text-green-400 mb-1">$ docker run -d -p 8080:80 my-web-server</div>`;
                setTimeout(() => {
                    terminal.innerHTML += `<div class="text-gray-300 text-xs">d1e2f3g4h5i6j7k8l9m0... (Container ID)</div>`;
                    terminal.innerHTML += `<div class="mb-2 mt-2">user@pc:~/my-first-container$ <span class="animate-pulse">_</span></div>`;
                    terminal.scrollTop = terminal.scrollHeight;
                    // Trigger next step encouragement or unlock
                    alert("ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¾ã—ãŸï¼å·¦ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€Œå‹•ä½œç¢ºèªã€ã¸é€²ã‚“ã§ãã ã•ã„ã€‚");
                }, 800);
            }
        }

        function performRebuildSimulation() {
            const statusArea = document.getElementById('rebuild-status');
            const resultArea = document.getElementById('rebuild-result');
            const textArea = document.getElementById('edit-html-area').value;
            const updatedBrowser = document.getElementById('updated-browser-content');
            
            // Extract h1 and p content broadly (simple simulation)
            // Just displaying what they typed roughly
            
            statusArea.classList.remove('hidden');
            statusArea.innerHTML = '> Saving index.html...<br>';
            
            setTimeout(() => { statusArea.innerHTML += '> docker build -t my-web-server .<br>'; }, 500);
            setTimeout(() => { statusArea.innerHTML += '> docker stop old_container<br>'; }, 1500);
            setTimeout(() => { statusArea.innerHTML += '> docker rm old_container<br>'; }, 2000);
            setTimeout(() => { statusArea.innerHTML += '> docker run -d -p 8080:80 my-web-server<br>'; }, 2500);
            setTimeout(() => { 
                statusArea.innerHTML += '<span class="text-green-400">DONE! Refreshing browser...</span>'; 
                
                // Parse simple HTML for preview (sanitized roughly by just taking value)
                // For safety in this constrained env, we just use the value as innerHTML but 
                // in real app we'd sanitize. Here we assume user is author.
                updatedBrowser.innerHTML = textArea; 
                
                resultArea.classList.remove('hidden');
                setTimeout(() => { resultArea.classList.remove('opacity-0'); }, 100);
            }, 3000);
        }

        function refreshBrowser() {
            const viewport = document.getElementById('browser-viewport');
            viewport.style.opacity = '0.5';
            setTimeout(() => {
                viewport.style.opacity = '1';
            }, 300);
        }

        // --- INIT ---
        window.onload = () => {
            loadStep(0);
        };

    </script>
</body>
</html>