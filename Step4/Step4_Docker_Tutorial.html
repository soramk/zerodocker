<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 4 è©³ç´°ã‚¬ã‚¤ãƒ‰: Dev Containers (é–‹ç™ºç’°å¢ƒã®ã‚³ãƒ³ãƒ†ãƒŠåŒ–)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: "Dev Environment". Background: Warm Neutral. Accents: VS Code Blue (#007acc) & Remote Green (#16825d). -->
    <!-- Application Structure Plan: Consistent with previous steps.
         - Key Change: Introduction of ".devcontainer" concept.
         - Key Change: Simulation of VS Code UI "Reopen in Container".
         - Key Change: Visualization of Host vs Container separation.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }
        .font-mono {
            font-family: 'Fira Code', monospace;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        .typing-effect {
            overflow: hidden;
            white-space: nowrap;
            border-right: 2px solid transparent;
            animation: typing 2s steps(40, end);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in forwards;
            opacity: 0;
        }
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        .step-btn.active {
            background-color: #eff6ff; /* Blue tint for VS Code */
            border-left: 4px solid #007acc;
            color: #0c4a6e;
        }
        .step-btn {
            border-left: 4px solid transparent;
        }
        /* VS Code Simulator Styles */
        .vscode-statusbar {
            background-color: #007acc;
            color: white;
        }
        .remote-indicator {
            background-color: #16825d; /* Remote Green */
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 z-10 flex-none">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <span class="text-3xl">ğŸ’»</span>
                <div>
                    <h1 class="text-xl font-bold text-slate-800 leading-none">Step 4: é–‹ç™ºç’°å¢ƒã”ã¨ã‚³ãƒ³ãƒ†ãƒŠã«ã™ã‚‹</h1>
                    <p class="text-xs text-slate-500 mt-1">Dev Containers & VS Code é€£æºãƒãƒ³ã‚ºã‚ªãƒ³</p>
                </div>
            </div>
            <div class="hidden md:block">
                <div class="flex items-center space-x-2 text-sm text-slate-500">
                    <span>Progress:</span>
                    <div class="w-32 h-2 bg-slate-100 rounded-full overflow-hidden">
                        <div id="progress-bar" class="h-full bg-blue-600 transition-all duration-500" style="width: 0%"></div>
                    </div>
                    <span id="progress-text">0%</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Workspace -->
    <div class="flex-grow flex flex-col md:flex-row overflow-hidden max-w-7xl mx-auto w-full">
        
        <!-- Sidebar Navigation -->
        <nav class="w-full md:w-64 bg-white border-r border-slate-200 flex-none overflow-y-auto z-0">
            <div class="p-4 space-y-1">
                <button onclick="loadStep(0)" class="step-btn w-full text-left px-4 py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex items-center justify-between" id="btn-step-0">
                    <span>1. ã‚³ãƒ³ã‚»ãƒ—ãƒˆ</span>
                    <span class="text-xs bg-slate-100 px-2 py-0.5 rounded text-slate-400">Intro</span>
                </button>
                <button onclick="loadStep(1)" class="step-btn w-full text-left px-4 py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex items-center justify-between" id="btn-step-1">
                    <span>2. è¨­å®šä½œæˆ</span>
                    <span class="text-xs bg-slate-100 px-2 py-0.5 rounded text-slate-400">Config</span>
                </button>
                <button onclick="loadStep(2)" class="step-btn w-full text-left px-4 py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex items-center justify-between" id="btn-step-2">
                    <span>3. ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•</span>
                    <span class="text-xs bg-slate-100 px-2 py-0.5 rounded text-slate-400">Open</span>
                </button>
                <button onclick="loadStep(3)" class="step-btn w-full text-left px-4 py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex items-center justify-between" id="btn-step-3">
                    <span>4. é–‹ç™ºä½“é¨“</span>
                    <span class="text-xs bg-slate-100 px-2 py-0.5 rounded text-slate-400">Dev</span>
                </button>
                <button onclick="loadStep(4)" class="step-btn w-full text-left px-4 py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex items-center justify-between" id="btn-step-4">
                    <span>5. ãƒãƒ¼ãƒ å…±æœ‰</span>
                    <span class="text-xs bg-slate-100 px-2 py-0.5 rounded text-slate-400">Team</span>
                </button>
                <button onclick="loadStep(5)" class="step-btn w-full text-left px-4 py-3 rounded hover:bg-slate-50 transition-colors font-medium text-slate-600 flex items-center justify-between" id="btn-step-5">
                    <span>6. å®Œäº†</span>
                    <span class="text-xs bg-slate-100 px-2 py-0.5 rounded text-slate-400">Done</span>
                </button>
            </div>
            
            <div class="p-4 mt-4 border-t border-slate-100">
                <div class="bg-blue-50 p-3 rounded text-sm text-blue-800 border border-blue-200">
                    <p class="font-bold mb-1">>< Dev Containers</p>
                    <p id="step-hint">VS Codeã®æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã§å¿«é©ã«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¾ã™ã€‚</p>
                </div>
            </div>
        </nav>

        <!-- Content Area -->
        <main class="flex-grow bg-slate-50 overflow-y-auto p-4 md:p-8 relative" id="main-content">
            <!-- Dynamic Content injected here -->
        </main>

    </div>

    <!-- Scripts -->
    <script>
        // --- DATA & CONTENT ---
        const tutorialSteps = [
            {
                id: "concept",
                title: "1. ç’°å¢ƒæ§‹ç¯‰ã®è‹¦ã—ã¿ã‹ã‚‰ã®è§£æ”¾",
                content: `
                    <div class="max-w-3xl mx-auto space-y-8 animate-fade-in">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800 mb-4">ã€Œç§ã®PCã§ã¯å‹•ãã®ã«...ã€</h2>
                            <p class="text-lg text-slate-600 mb-6">
                                ã‚¢ãƒ—ãƒªã¯ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã§ãã¾ã—ãŸãŒã€ãã‚Œã‚’æ›¸ããŸã‚ã®<strong>ã€Œã‚¨ãƒ‡ã‚£ã‚¿ã€ã‚„ã€Œãƒ„ãƒ¼ãƒ«ã€</strong>ï¼ˆPythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€Gitã®è¨­å®šã€Linterãªã©ï¼‰ã¯ã€ã¾ã å€‹äººã®PCç’°å¢ƒã«ä¾å­˜ã—ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ<br>
                                Step 4ã§ã¯ã€<strong>é–‹ç™ºç’°å¢ƒãã®ã‚‚ã®ã‚’ã‚³ãƒ³ãƒ†ãƒŠåŒ–</strong>ã—ã¾ã™ã€‚
                            </p>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 text-center opacity-70">
                                <div class="text-4xl mb-4">ğŸ˜«</div>
                                <h3 class="font-bold text-slate-700 mb-2">ã“ã‚Œã¾ã§ã®é–‹ç™º</h3>
                                <p class="text-sm text-slate-500 text-left px-4">
                                    ãƒ»æ–°äººã€ŒPythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆã„ã¾ã›ã‚“ã€<br>
                                    ãƒ»å…ˆè¼©ã€Œã‚ãƒ¼ã€PATHé€šã—ã¦ãªã„ï¼Ÿã€<br>
                                    ãƒ»<span class="font-bold text-red-500">ç’°å¢ƒæ§‹ç¯‰ã«3æ—¥ã‹ã‹ã‚‹</span>
                                </p>
                            </div>
                            <div class="bg-blue-50 p-6 rounded-xl shadow-md border border-blue-200 text-center relative">
                                <div class="absolute -top-3 -right-3 bg-blue-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow">Solution</div>
                                <div class="text-4xl mb-4">âœ¨</div>
                                <h3 class="font-bold text-blue-800 mb-2">Dev Containers</h3>
                                <p class="text-sm text-blue-800 text-left px-4">
                                    ãƒ»è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªãƒã‚¸ãƒˆãƒªã«å…¥ã‚Œã‚‹ã ã‘<br>
                                    ãƒ»VS Codeã§é–‹ãã¨è‡ªå‹•ã§ç’°å¢ƒæ§‹ç¯‰<br>
                                    ãƒ»<span class="font-bold text-blue-600">èª°ã§ã‚‚5åˆ†ã§é–‹ç™ºé–‹å§‹</span>
                                </p>
                            </div>
                        </div>

                        <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded-r">
                            <p class="text-green-800 font-bold">ğŸ¯ ã‚´ãƒ¼ãƒ«: VS Code Remote Container</p>
                            <p class="text-sm text-green-700 mt-1">
                                ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«ã€ŒVS Codeã®ã‚µãƒ¼ãƒãƒ¼ã€ã‚’ç«‹ã¡ä¸Šã’ã€æ‰‹å…ƒã®VS Codeã‹ã‚‰æ¥ç¶šã—ã¾ã™ã€‚<br>
                                æ‰‹å…ƒã®PCã‚’ä¸€åˆ‡æ±šã•ãšã«é–‹ç™ºãŒã§ãã‚‹ã€ç¾ä»£ã®é­”æ³•ã§ã™ã€‚
                            </p>
                        </div>

                        <div class="text-center pt-8">
                            <button onclick="loadStep(1)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg transition-all transform hover:scale-105">
                                è¨­å®šã‚’å§‹ã‚ã‚‹
                            </button>
                        </div>
                    </div>
                `,
                hint: "Windowsã§ã‚‚Macã§ã‚‚ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã¯åŒã˜Linuxç’°å¢ƒã€‚OSã®é•ã„ã«ã‚ˆã‚‹ãƒˆãƒ©ãƒ–ãƒ«ãŒæ¿€æ¸›ã—ã¾ã™ã€‚"
            },
            {
                id: "config",
                title: "2. å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ« devcontainer.json",
                content: `
                    <div class="max-w-5xl mx-auto space-y-6 animate-fade-in">
                        <div class="flex justify-between items-end">
                            <div>
                                <h2 class="text-2xl font-bold text-slate-800">.devcontainer ãƒ•ã‚©ãƒ«ãƒ€</h2>
                                <p class="text-slate-600 mt-2">
                                    ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã« <code>.devcontainer</code> ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚Šã€ãã®ä¸­ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« <code>devcontainer.json</code> ã‚’ç½®ãã¾ã™ã€‚<br>
                                    ã“ã‚ŒãŒã€Œç†æƒ³ã®é–‹ç™ºç’°å¢ƒã€ã®è¨­è¨ˆå›³ã«ãªã‚Šã¾ã™ã€‚
                                </p>
                            </div>
                        </div>

                        <div class="grid lg:grid-cols-2 gap-8">
                            <!-- Virtual Editor -->
                            <div class="bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col h-[400px]">
                                <div class="flex bg-gray-900 text-gray-400 text-xs font-mono border-b border-gray-700">
                                    <div class="px-3 py-2 bg-gray-800 text-gray-200 border-t-2 border-blue-500">devcontainer.json</div>
                                </div>
                                <div class="p-4 overflow-auto flex-grow font-mono text-sm text-gray-300 relative group">
                                    <button onclick="copyCode()" class="absolute top-4 right-4 bg-gray-700 hover:bg-gray-600 text-white px-2 py-1 rounded text-xs opacity-0 group-hover:opacity-100 transition-opacity">Copy</button>
                                    <pre id="code-display" class="language-json"></pre>
                                </div>
                            </div>

                            <!-- Explanation & Viz -->
                            <div class="space-y-6 flex flex-col">
                                <div id="explanation-box" class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex-grow">
                                    <h3 class="font-bold text-blue-700 mb-2">devcontainer.json ã®å½¹å‰²</h3>
                                    <p class="text-sm text-slate-600 mb-4">
                                        ã€Œã©ã®OSã‚’ä½¿ã†ã‹ã€ã ã‘ã§ãªãã€ã€Œã©ã®VS Codeæ‹¡å¼µæ©Ÿèƒ½ã‚’å…¥ã‚Œã‚‹ã‹ã€ã€Œèµ·å‹•æ™‚ã«ä½•ã‚’ã™ã‚‹ã‹ã€ã¾ã§å®šç¾©ã§ãã¾ã™ã€‚
                                    </p>
                                    <ul class="space-y-3 text-sm text-slate-600">
                                        <li class="flex items-start">
                                            <span class="font-mono bg-slate-200 px-1 rounded mr-2 text-xs">image</span>
                                            <span>
                                                <strong>ãƒ™ãƒ¼ã‚¹ç’°å¢ƒ:</strong> MicrosoftãŒç”¨æ„ã—ãŸPythoné–‹ç™ºç”¨ã®ãƒªãƒƒãƒãªã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã„ã¾ã™ã€‚
                                            </span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="font-mono bg-slate-200 px-1 rounded mr-2 text-xs">extensions</span>
                                            <span>
                                                <strong>æ‹¡å¼µæ©Ÿèƒ½:</strong> Pythonè£œå®Œã‚„Dockerç®¡ç†ãƒ„ãƒ¼ãƒ«ãªã©ã€ãƒãƒ¼ãƒ å…¨å“¡ã«å…¥ã‚Œã¦ã»ã—ã„æ©Ÿèƒ½ã‚’ãƒªã‚¹ãƒˆåŒ–ã—ã¾ã™ã€‚
                                            </span>
                                        </li>
                                        <li class="flex items-start">
                                            <span class="font-mono bg-slate-200 px-1 rounded mr-2 text-xs">postCreateCommand</span>
                                            <span>
                                                <strong>è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—:</strong> ã‚³ãƒ³ãƒ†ãƒŠä½œæˆå¾Œã«è‡ªå‹•ã§ <code>pip install</code> ãªã©ã‚’èµ°ã‚‰ã›ã¾ã™ã€‚
                                            </span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="text-right">
                             <button onclick="loadStep(2)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition-colors">
                                ãƒ•ã‚¡ã‚¤ãƒ«æº–å‚™OKï¼èµ·å‹•ã¸ â†’
                            </button>
                        </div>
                    </div>
                `,
                hint: "æ‰‹ä½œæ¥­ã§ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚‰ãªãã¦ã‚‚ã€VS Codeã®ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆ(F1)ã‹ã‚‰ 'Add Dev Container Configuration Files...' ã§è‡ªå‹•ç”Ÿæˆã§ãã¾ã™ã€‚"
            },
            {
                id: "open",
                title: "3. ã‚³ãƒ³ãƒ†ãƒŠã§é–‹ã (Reopen)",
                content: `
                    <div class="max-w-4xl mx-auto space-y-8 animate-fade-in">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">é‹å‘½ã®ãƒœã‚¿ãƒ³ "Reopen in Container"</h2>
                            <p class="text-slate-600 mt-2">
                                è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹çŠ¶æ…‹ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ãã¨ã€VS CodeãŒã€Œã‚³ãƒ³ãƒ†ãƒŠã§é–‹ãç›´ã—ã¾ã™ã‹ï¼Ÿã€ã¨èã„ã¦ãã¾ã™ã€‚<br>
                                ã“ã‚Œã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã®ãŒã€å¿«é©ãªé–‹ç™ºãƒ©ã‚¤ãƒ•ã¸ã®å…¥ã‚Šå£ã§ã™ã€‚
                            </p>
                        </div>

                        <!-- VS Code Simulator -->
                        <div class="bg-gray-900 rounded-lg shadow-2xl border border-gray-700 overflow-hidden relative h-96 flex flex-col">
                            <!-- Title Bar -->
                            <div class="bg-gray-800 px-4 py-2 flex items-center justify-center text-xs text-gray-400">
                                <span>My Python Project - VS Code</span>
                            </div>
                            
                            <!-- Editor Area -->
                            <div class="flex-grow p-8 flex items-center justify-center relative bg-[#1e1e1e]">
                                <div class="text-gray-500 text-center">
                                    <p class="mb-4">VS Code is initializing...</p>
                                </div>
                                
                                <!-- Notification Toast -->
                                <div id="notification-toast" class="absolute bottom-4 right-4 bg-[#252526] text-white p-4 rounded shadow-lg border-l-4 border-blue-500 w-80 animate-bounce">
                                    <div class="flex justify-between items-start mb-2">
                                        <span class="font-bold text-sm">Folder contains a Dev Container configuration file.</span>
                                    </div>
                                    <div class="flex space-x-2 mt-3">
                                        <button onclick="simulateReopen()" class="bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-xs font-bold transition-colors">Reopen in Container</button>
                                        <button class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs transition-colors">Ignore</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Status Bar -->
                            <div class="vscode-statusbar px-2 py-1 flex justify-between items-center text-xs">
                                <div class="flex items-center">
                                    <div id="remote-indicator" class="bg-blue-600 px-2 py-1 mr-2 flex items-center cursor-pointer transition-colors duration-500">
                                        <span class="font-bold mr-1">><</span> <span id="remote-text">None</span>
                                    </div>
                                    <span class="mr-3">master*</span>
                                    <span>0 errors</span>
                                </div>
                                <div>UTF-8</div>
                            </div>
                            
                            <!-- Loading Overlay -->
                            <div id="loading-overlay" class="absolute inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center hidden">
                                <div class="w-64 bg-gray-800 rounded p-4 border border-gray-600">
                                    <div class="text-blue-400 text-xs mb-2 font-mono">Dev Containers: Starting...</div>
                                    <div class="w-full bg-gray-700 h-1 rounded overflow-hidden">
                                        <div class="h-full bg-blue-500 animate-pulse w-2/3"></div>
                                    </div>
                                    <div class="mt-2 text-gray-400 text-[10px] font-mono" id="loading-log">Building image...</div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                            <h3 class="font-bold text-lg text-slate-700 mb-4 text-center">Dev Containers ã®ä»•çµ„ã¿ (ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)</h3>
                            
                            <div class="w-full overflow-hidden mb-6">
                                <svg viewBox="0 0 600 340" class="w-full h-auto max-w-lg mx-auto" xmlns="http://www.w3.org/2000/svg">
                                    <!-- Host OS -->
                                    <rect x="20" y="20" width="240" height="300" rx="10" fill="#f8fafc" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5" />
                                    <text x="140" y="50" text-anchor="middle" font-weight="bold" fill="#64748b">Host OS (Win/Mac)</text>
                                    
                                    <!-- VS Code Client -->
                                    <rect x="50" y="80" width="180" height="100" rx="6" fill="#ffffff" stroke="#007acc" stroke-width="2" />
                                    <text x="140" y="110" text-anchor="middle" font-weight="bold" fill="#007acc">VS Code (Client)</text>
                                    <text x="140" y="130" text-anchor="middle" font-size="10" fill="#64748b">UI / Theme / Keybindings</text>
                                    
                                    <!-- Source Code Local -->
                                    <g transform="translate(50, 220)">
                                        <rect width="180" height="60" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="2" />
                                        <text x="90" y="25" text-anchor="middle" font-size="20">ğŸ“‚</text>
                                        <text x="90" y="45" text-anchor="middle" font-size="10" fill="#64748b">Source Code (Local)</text>
                                    </g>

                                    <!-- Container -->
                                    <rect x="340" y="20" width="240" height="300" rx="10" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2" />
                                    <text x="460" y="50" text-anchor="middle" font-weight="bold" fill="#0369a1">Dev Container (Linux)</text>
                                    
                                    <!-- VS Code Server -->
                                    <rect x="370" y="80" width="180" height="120" rx="6" fill="#ffffff" stroke="#16825d" stroke-width="2" />
                                    <text x="460" y="110" text-anchor="middle" font-weight="bold" fill="#16825d">VS Code Server</text>
                                    <text x="460" y="130" text-anchor="middle" font-size="10" fill="#64748b">Extensions (Python, etc.)</text>
                                    <text x="460" y="150" text-anchor="middle" font-size="10" fill="#64748b">Terminal / Debugger</text>
                                    <text x="460" y="170" text-anchor="middle" font-size="10" fill="#64748b">Runtime (Python 3.9)</text>

                                    <!-- Mounted Source -->
                                    <g transform="translate(370, 220)">
                                        <rect width="180" height="60" rx="6" fill="#fff" stroke="#e2e8f0" stroke-width="2" stroke-dasharray="4,2" />
                                        <text x="90" y="25" text-anchor="middle" font-size="20">ğŸ“‚</text>
                                        <text x="90" y="45" text-anchor="middle" font-size="10" fill="#64748b">Mounted Source</text>
                                    </g>

                                    <!-- Connections -->
                                    <path d="M 230 130 L 370 130" stroke="#007acc" stroke-width="3" marker-end="url(#arrow-blue)" />
                                    <rect x="265" y="115" width="70" height="30" rx="15" fill="#fff" stroke="#007acc" />
                                    <text x="300" y="134" text-anchor="middle" font-size="10" font-weight="bold" fill="#007acc">Connect</text>

                                    <path d="M 230 250 L 370 250" stroke="#f59e0b" stroke-width="3" stroke-dasharray="5,3" marker-end="url(#arrow-orange)" />
                                    <rect x="265" y="235" width="70" height="30" rx="15" fill="#fff" stroke="#f59e0b" />
                                    <text x="300" y="254" text-anchor="middle" font-size="10" font-weight="bold" fill="#f59e0b">Mount</text>

                                    <defs>
                                        <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#007acc" /></marker>
                                        <marker id="arrow-orange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b" /></marker>
                                    </defs>
                                </svg>
                            </div>

                            <h4 class="font-bold text-sm text-slate-700 mb-2">ãƒã‚¤ãƒ³ãƒˆ:</h4>
                            <ul class="list-disc list-inside text-sm text-slate-600 space-y-1">
                                <li><strong>UIã¨å®Ÿè¡Œç’°å¢ƒã®åˆ†é›¢:</strong> VS Codeã®ç”»é¢ã¯PCã§å‹•ãã¾ã™ãŒã€ã‚³ãƒãƒ³ãƒ‰ã‚„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å‹•ãã¾ã™ã€‚</li>
                                <li><strong>æ‹¡å¼µæ©Ÿèƒ½ã‚‚ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­:</strong> Pythonã®è£œå®Œæ©Ÿèƒ½ãªã©ã¯ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ã€ŒVS Code Serverã€ãŒæ‹…å½“ã—ã¾ã™ã€‚</li>
                                <li><strong>ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰:</strong> PCã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«è¦‹ã›ã‚‹ï¼ˆãƒã‚¦ãƒ³ãƒˆã™ã‚‹ï¼‰ã“ã¨ã§ã€ç·¨é›†çµæœãŒå³åº§ã«åæ˜ ã•ã‚Œã¾ã™ã€‚</li>
                            </ul>
                        </div>
                    </div>
                `,
                hint: "ä¸€åº¦ã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚Œã°ã€æ¬¡å›ã‹ã‚‰ã¯æ•°ç§’ã§èµ·å‹•ã—ã¾ã™ã€‚"
            },
            {
                id: "dev",
                title: "4. ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã®é–‹ç™ºä½“é¨“",
                content: `
                    <div class="max-w-4xl mx-auto space-y-8 animate-fade-in">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">ãã“ã¯ã‚‚ã†ã€ã‚³ãƒ³ãƒ†ãƒŠã®ä¸­</h2>
                            <p class="text-slate-600 mt-2">
                                è¦‹ãŸç›®ã¯ã„ã¤ã‚‚ã®VS Codeã§ã™ãŒã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã¨ãã“ã¯Linuxã®ä¸–ç•Œã€‚<br>
                                Pythonã‚‚Gitã‚‚ã€å…¨ã¦è¨­å®šé€šã‚Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚
                            </p>
                        </div>

                        <!-- Terminal Simulator -->
                        <div class="bg-[#1e1e1e] rounded-lg shadow-2xl border border-gray-700 p-1 font-mono text-sm text-[#cccccc]">
                            <div class="flex items-center px-4 py-2 bg-[#252526] rounded-t border-b border-gray-700 mb-2 text-xs">
                                <span class="uppercase">Terminal</span>
                            </div>
                            <div class="p-4 h-64 overflow-y-auto terminal-scroll" id="terminal-output">
                                <div class="mb-2">vscode@a1b2c3d4:/workspaces/my-project$ <span class="animate-pulse">_</span></div>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="grid md:grid-cols-2 gap-4">
                            <button onclick="runTerminalCommand('python_ver')" class="bg-white hover:bg-gray-50 border border-slate-200 p-4 rounded-lg text-left shadow-sm transition-colors group">
                                <div class="font-bold text-slate-700 group-hover:text-blue-600">ğŸ Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª</div>
                                <div class="text-xs text-slate-500 mt-1"><code>python --version</code></div>
                            </button>
                            <button onclick="runTerminalCommand('pip_list')" class="bg-white hover:bg-gray-50 border border-slate-200 p-4 rounded-lg text-left shadow-sm transition-colors group">
                                <div class="font-bold text-slate-700 group-hover:text-blue-600">ğŸ“¦ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç¢ºèª</div>
                                <div class="text-xs text-slate-500 mt-1"><code>pip list</code> (FlaskãŒå…¥ã£ã¦ã‚‹ã¯ãšï¼)</div>
                            </button>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-xl border border-green-200 flex items-start">
                            <span class="text-2xl mr-3">ğŸ’¡</span>
                            <div>
                                <h4 class="font-bold text-green-800 text-sm">ãƒ›ã‚¹ãƒˆOSï¼ˆã‚ãªãŸã®PCï¼‰ã¯æ±šã‚Œã¾ã›ã‚“</h4>
                                <p class="text-xs text-green-700 mt-1">
                                    ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã„ãã‚‰ <code>pip install</code> ã—ã¦ã‚‚ã€PCæœ¬ä½“ã®Pythonç’°å¢ƒã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“ã€‚<br>
                                    ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«å®Œå…¨ã«éš”é›¢ã•ã‚ŒãŸç’°å¢ƒã‚’æŒã¦ã‚‹ã®ã§ã™ã€‚
                                </p>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                             <button onclick="loadStep(4)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition-colors">
                                æ¬¡ã¸ï¼šãƒãƒ¼ãƒ é–‹ç™ºã®ãƒ¡ãƒªãƒƒãƒˆ
                            </button>
                        </div>
                    </div>
                `,
                hint: "VS Codeã®å·¦ä¸‹ã«ã‚ã‚‹ç·‘è‰²ã®ãƒãƒ¼ã‚¯ãŒã€ŒDev Containerã€ã«ãªã£ã¦ã„ã‚Œã°ã€ã‚³ãƒ³ãƒ†ãƒŠæ¥ç¶šæˆåŠŸã§ã™ã€‚"
            },
            {
                id: "team",
                title: "5. ãƒãƒ¼ãƒ é–‹ç™ºã¸ã®å±•é–‹",
                content: `
                    <div class="max-w-4xl mx-auto space-y-6 animate-fade-in">
                        <div>
                            <h2 class="text-2xl font-bold text-slate-800">ã€ŒNew Joinerã€ã¸ã®ãŠã‚‚ã¦ãªã—</h2>
                            <p class="text-slate-600 mt-2">
                                æ–°ã—ã„ãƒ¡ãƒ³ãƒãƒ¼ãŒãƒãƒ¼ãƒ ã«å…¥ã£ã¦ããŸæ™‚ã€ã‚ãªãŸã®ãƒªãƒã‚¸ãƒˆãƒªã‚’Cloneã—ã¦ã€<br>
                                VS Codeã§é–‹ãã ã‘ã§ç’°å¢ƒæ§‹ç¯‰ãŒå®Œäº†ã—ã¾ã™ã€‚ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¯ã‚‚ã†è¦ã‚Šã¾ã›ã‚“ã€‚
                            </p>
                        </div>

                        <div class="bg-white p-8 rounded-xl shadow-lg border border-slate-200">
                            <h3 class="font-bold text-center text-slate-700 mb-6">Dev Containers å°å…¥åŠ¹æœ</h3>
                            
                            <div class="grid md:grid-cols-2 gap-8 items-center">
                                <!-- Before -->
                                <div class="space-y-4 opacity-60 grayscale transition-all hover:grayscale-0 hover:opacity-100">
                                    <h4 class="font-bold text-center text-gray-500 border-b pb-2">ã“ã‚Œã¾ã§ã®æ‰‹é †æ›¸ (Wiki)</h4>
                                    <ul class="text-sm text-gray-600 space-y-2 list-decimal list-inside bg-gray-50 p-4 rounded">
                                        <li>Python 3.9.0 ã‚’DLã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
                                        <li>PATHã‚’é€šã™ (Win/Macã§é•ã†)</li>
                                        <li>Gitã®è¨­å®šã‚’ã™ã‚‹</li>
                                        <li>PostgreSQLã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«...</li>
                                        <li>æ‹¡å¼µæ©Ÿèƒ½A, B, Cã‚’å…¥ã‚Œã‚‹...</li>
                                        <li class="text-red-500 font-bold">å‹•ã‹ãªã„ã®ã§å…ˆè¼©ã«èã (2æ™‚é–“)</li>
                                    </ul>
                                </div>

                                <!-- After -->
                                <div class="space-y-4 transform scale-105">
                                    <h4 class="font-bold text-center text-blue-600 border-b border-blue-200 pb-2">Dev Containers</h4>
                                    <div class="bg-blue-50 p-6 rounded-lg text-center border-2 border-blue-400 border-dashed">
                                        <div class="text-5xl mb-4">ğŸš€</div>
                                        <p class="font-bold text-slate-700">Open in VS Code</p>
                                        <p class="text-xs text-slate-500 mt-2">ã“ã‚Œã ã‘ã€‚<br>ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’é£²ã‚“ã§å¾…ã¦ã°å®Œäº†ã€‚</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-slate-800 text-white p-4 rounded-xl flex items-center shadow-lg">
                            <span class="text-2xl mr-4">â˜ï¸</span>
                            <div>
                                <h4 class="font-bold text-sm">GitHub Codespaces ã‚‚åŒã˜ä»•çµ„ã¿</h4>
                                <p class="text-xs text-slate-300 mt-1">
                                    ã“ã® <code>.devcontainer</code> è¨­å®šã¯ã€GitHubã®ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã‚¨ãƒ‡ã‚£ã‚¿ (Codespaces) ã§ã‚‚ãã®ã¾ã¾ä½¿ãˆã¾ã™ã€‚<br>
                                    ãƒã‚¤ã‚¹ãƒšãƒƒã‚¯ãªPCã™ã‚‰ä¸è¦ã«ãªã‚‹æœªæ¥ã§ã™ã€‚
                                </p>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <button onclick="loadStep(5)" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition-colors">
                                ãŠç‰‡ä»˜ã‘ã¸
                            </button>
                        </div>
                    </div>
                `,
                hint: "ã€Œç’°å¢ƒæ§‹ç¯‰æ‰‹é †æ›¸ã€ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆãŒã‚¼ãƒ­ã«ãªã‚‹ã“ã¨ãŒæœ€å¤§ã®ROIï¼ˆæŠ•è³‡å¯¾åŠ¹æœï¼‰ã§ã™ã€‚"
            },
            {
                id: "done",
                title: "6. æ¥ç¶šè§£é™¤ã¨ãŠç‰‡ä»˜ã‘",
                content: `
                    <div class="max-w-3xl mx-auto space-y-8 animate-fade-in">
                        <div class="text-center">
                            <h2 class="text-2xl font-bold text-slate-800">ç¾å®Ÿä¸–ç•Œã¸æˆ»ã‚‹</h2>
                            <p class="text-slate-600 mt-2">
                                VS Codeã‚’é–‰ã˜ã‚‹ã‹ã€ã€ŒClose Remote Connectionã€ã‚’é¸ã¹ã°ã€ã‚³ãƒ³ãƒ†ãƒŠã¨ã®æ¥ç¶šã¯åˆ‡ã‚Œã¾ã™ã€‚<br>
                                ã‚³ãƒ³ãƒ†ãƒŠè‡ªä½“ã‚‚åœæ­¢ã—ã€PCã®ãƒªã‚½ãƒ¼ã‚¹ã‚’è§£æ”¾ã—ã¾ã™ã€‚
                            </p>
                        </div>

                        <!-- Terminal Simulator -->
                        <div class="bg-gray-900 rounded-lg shadow-lg border border-gray-700 font-mono text-sm text-gray-300 p-4">
                            <p class="text-center text-gray-400 mb-4">[Disconnected from Dev Container: My Python Dev App]</p>
                            <div class="flex justify-center space-x-4">
                                <div class="text-center">
                                    <div class="text-green-500 font-bold text-xl">Clean âœ¨</div>
                                    <div class="text-xs text-gray-500">Local Environment</div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-8 rounded-xl text-center shadow-lg">
                            <h3 class="text-2xl font-bold mb-4">Step 4 Clear! ğŸ‰</h3>
                            <p class="mb-6 opacity-90">
                                ç´ æ™´ã‚‰ã—ã„ï¼ã“ã‚Œã§ã€Œè‡ªåˆ†ã ã‘ã§ãªãã€ãƒãƒ¼ãƒ å…¨å“¡ã®é–‹ç™ºåŠ¹ç‡ã‚’ä¸Šã’ã‚‹ã€ã‚¹ã‚­ãƒ«ã‚’æ‰‹ã«å…¥ã‚Œã¾ã—ãŸã€‚<br>
                                ã‚¢ãƒ—ãƒªã€DBã€ãã—ã¦é–‹ç™ºç’°å¢ƒã€‚<br>
                                å…¨ã¦ãŒã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸä»Šã€æœ€å¾Œã®ä»•ä¸Šã’ã¯ã€Œè‡ªå‹•åŒ–ã€ã§ã™ã€‚
                            </p>
                            <div class="flex justify-center gap-4">
                                <a href="../Step5/Step5_Docker_Tutorial.html" class="inline-block bg-white text-blue-700 font-bold py-3 px-8 rounded-full shadow-lg transition-transform hover:scale-105">
                                    Step 5 ã¸ (CI/CDè‡ªå‹•åŒ–)
                                </a>
                            </div>
                        </div>
                    </div>
                `,
                hint: "ä½¿ã„çµ‚ã‚ã£ãŸDev Containerã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼ˆæ‹¡å¼µæ©Ÿèƒ½ãªã©ã®ãƒ‡ãƒ¼ã‚¿ï¼‰ã¯æ®‹ã‚Šã¾ã™ã€‚ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ãŒæ°—ã«ãªã£ãŸã‚‰Docker Desktopã‹ã‚‰å‰Šé™¤ã—ã¾ã—ã‚‡ã†ã€‚"
            }
        ];

        const codeSnippet = `{
  "name": "My Python Dev App",
  "image": "mcr.microsoft.com/devcontainers/python:3.9",
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": {}
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-azuretools.vscode-docker",
        "njpwerner.autodocstring"
      ]
    }
  },
  "postCreateCommand": "pip install -r requirements.txt"
}`;

        // --- APP STATE ---
        let currentStep = 0;
        let isContainerActive = false;

        // --- FUNCTIONS ---
        function loadStep(index) {
            currentStep = index;
            
            // Update UI Buttons
            document.querySelectorAll('.step-btn').forEach((btn, idx) => {
                if (idx === index) {
                    btn.classList.add('active');
                    btn.classList.remove('text-slate-600');
                    btn.classList.add('text-blue-700');
                } else {
                    btn.classList.remove('active');
                    btn.classList.add('text-slate-600');
                    btn.classList.remove('text-blue-700');
                }
            });

            // Update Progress Bar
            const progress = Math.round(((index) / (tutorialSteps.length - 1)) * 100);
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').innerText = `${progress}%`;

            // Inject Content
            const container = document.getElementById('main-content');
            container.innerHTML = tutorialSteps[index].content;
            document.getElementById('step-hint').innerText = tutorialSteps[index].hint;

            // Step-specific initializations
            if (index === 1) { // Config
                setTimeout(() => {
                    const display = document.getElementById('code-display');
                    if(display) {
                        display.textContent = codeSnippet;
                    }
                }, 100);
            }
            
            // Reset Container Sim State if revisiting Open step
            if (index === 2) {
                isContainerActive = false;
            }
        }

        function copyCode() {
            navigator.clipboard.writeText(codeSnippet);
            alert("ã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
        }

        function simulateReopen() {
            const toast = document.getElementById('notification-toast');
            const overlay = document.getElementById('loading-overlay');
            const log = document.getElementById('loading-log');
            const remoteIndicator = document.getElementById('remote-indicator');
            const remoteText = document.getElementById('remote-text');

            toast.style.display = 'none';
            overlay.classList.remove('hidden');

            const logs = [
                "Starting Dev Container...",
                "Cloning repository...",
                "Building image...",
                "Installing VS Code Server...",
                "Installing extensions: ms-python.python...",
                "Running postCreateCommand: pip install...",
                "Connected to Dev Container."
            ];

            let delay = 0;
            logs.forEach((msg, i) => {
                delay += 600;
                setTimeout(() => {
                    log.innerText = msg;
                }, delay);
            });

            setTimeout(() => {
                overlay.classList.add('hidden');
                remoteIndicator.classList.add('remote-indicator'); // Green
                remoteIndicator.classList.remove('bg-blue-600');
                remoteText.innerText = "Dev Container: My Python Dev App";
                isContainerActive = true;
                alert("ã‚³ãƒ³ãƒ†ãƒŠé–‹ç™ºç’°å¢ƒãŒèµ·å‹•ã—ã¾ã—ãŸï¼\nVS Codeã®å·¦ä¸‹ãŒç·‘è‰²ã«ãªã£ãŸã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„ã€‚");
            }, delay + 600);
        }

        function runTerminalCommand(key) {
            const terminal = document.getElementById('terminal-output');
            
            // Resolve command string from key
            let cmd = key;
            if (key === 'python_ver') cmd = 'python --version';
            if (key === 'pip_list') cmd = 'pip list';
            
            terminal.innerHTML += '<div class="text-white mb-1">vscode@dev:~$ ' + cmd + '</div>';
            
            let output = "";
            if (key === 'python_ver') {
                output = '<div class="text-gray-400">Python 3.9.18</div>';
            } else if (key === 'pip_list') {
                // Safely construct multi-line output without template literals or risky escapes
                output = '<div class="text-gray-400"><pre class="font-mono">';
                output += 'Package      Version\n';
                output += '------------ -------\n';
                output += 'Flask        3.0.0\n';
                output += 'pip          23.3.1\n';
                output += 'setuptools   69.0.2';
                output += '</pre></div>';
            }

            setTimeout(() => {
                terminal.innerHTML += output;
                terminal.innerHTML += '<div class="mb-2 mt-2">vscode@dev:~$ <span class="animate-pulse">_</span></div>';
                terminal.scrollTop = terminal.scrollHeight;
            }, 300);
        }

        // --- INIT ---
        window.onload = () => {
            loadStep(0);
        };

    </script>
</body>
</html>