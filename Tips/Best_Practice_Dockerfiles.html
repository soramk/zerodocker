<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å„ªç§€ãªDockerfileã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³: Best Practices</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: "Best Practice Gold". Background: Dark/Light Mode aware. Accents: Gold (#f59e0b) for excellence, Green for Good, Red for Bad. -->
    
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc;
            color: #334155;
        }
        .font-mono {
            font-family: 'Fira Code', monospace;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        .nav-item.active {
            background-color: #fffbeb; /* Amber 50 */
            border-left: 4px solid #f59e0b; /* Amber 500 */
            color: #b45309; /* Amber 700 */
        }
        .nav-item {
            border-left: 4px solid transparent;
        }
        
        /* Code diff styles */
        .diff-add {
            background-color: #dcfce7; /* Green 100 */
            display: block;
            width: 100%;
        }
        .diff-remove {
            background-color: #fee2e2; /* Red 100 */
            text-decoration: line-through;
            color: #991b1b;
            display: block;
            width: 100%;
            opacity: 0.7;
        }
        .code-line {
            display: block;
            padding: 0 4px;
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 z-10 flex-none shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <span class="text-3xl">ğŸ†</span>
                <div>
                    <h1 class="text-xl font-bold text-slate-800 leading-none">Dockerfile Best Practices</h1>
                    <p class="text-xs text-slate-500 mt-1">ãƒ—ãƒ­ãŒä½¿ã†ã€Œå„ªç§€ãªDockerfileã€ã®ãƒ‘ã‚¿ãƒ¼ãƒ³é›†</p>
                </div>
            </div>
            <div class="hidden md:block">
                <a href="#" class="text-sm font-medium text-slate-500 hover:text-amber-600 transition-colors">
                    <span class="mr-2">ğŸ“š</span>Docker Document Reference
                </a>
            </div>
        </div>
    </header>

    <!-- Main Workspace -->
    <div class="flex-grow flex flex-col md:flex-row overflow-hidden max-w-7xl mx-auto w-full">
        
        <!-- Left Sidebar: List of Practices -->
        <nav class="w-full md:w-80 bg-white border-r border-slate-200 flex-none overflow-y-auto z-0">
            <div class="p-4">
                <h2 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 px-2">Patterns</h2>
                <div class="space-y-1" id="nav-list">
                    <!-- Nav items injected via JS -->
                </div>
            </div>
            
            <div class="p-4 border-t border-slate-100 bg-slate-50">
                <div class="text-xs text-slate-500">
                    <p class="font-bold mb-1">ğŸ’¡ ãƒ’ãƒ³ãƒˆ</p>
                    <p>ãƒªã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ãªãœãã®æ›¸ãæ–¹ãŒã€Œå„ªç§€ã€ãªã®ã‹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚</p>
                </div>
            </div>
        </nav>

        <!-- Right Content: Details -->
        <main class="flex-grow bg-slate-50 overflow-y-auto p-4 md:p-8 relative" id="main-content">
            <!-- Content injected via JS -->
            <div class="flex flex-col items-center justify-center h-full text-slate-400">
                <div class="text-4xl mb-4">ğŸ‘ˆ</div>
                <p>å·¦ã®ãƒªã‚¹ãƒˆã‹ã‚‰é …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
            </div>
        </main>

    </div>

    <!-- Templates & Scripts -->
    <script>
        // --- DATA ---
        const practices = [
            {
                id: "multi-stage",
                title: "Multi-stage Build",
                subtitle: "åŠ‡çš„ãªã‚µã‚¤ã‚ºãƒ€ã‚¦ãƒ³ã®é­”æ³•",
                tags: ["Golang", "Rust", "C++", "Size"],
                description: `
                    <p class="mb-4">
                        ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è¨€èªï¼ˆGo, Rustãªã©ï¼‰ã§ã¯ã€ã€Œãƒ“ãƒ«ãƒ‰ã«å¿…è¦ãªãƒ„ãƒ¼ãƒ«ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ï¼‰ã€ã¨ã€Œå®Ÿè¡Œã«å¿…è¦ãªç’°å¢ƒã€ã¯ç•°ãªã‚Šã¾ã™ã€‚<br>
                        ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã‚’æœ¬ç•ªã‚¤ãƒ¡ãƒ¼ã‚¸ã«æ®‹ã™ã¨ã€ã‚µã‚¤ã‚ºãŒè‚¥å¤§åŒ–ã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã‚‚é«˜ã¾ã‚Šã¾ã™ã€‚
                    </p>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
                        <h4 class="font-bold text-blue-700">ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <ul class="list-disc list-inside text-sm text-blue-800">
                            <li><code>AS builder</code> ã§ãƒ“ãƒ«ãƒ‰ç”¨ã‚¹ãƒ†ãƒ¼ã‚¸ã«åå‰ã‚’ã¤ã‘ã‚‹</li>
                            <li><code>COPY --from=builder</code> ã§ã€ã§ããŸãƒã‚¤ãƒŠãƒªã ã‘ã‚’è»½é‡OSã«ã‚³ãƒ”ãƒ¼ã™ã‚‹</li>
                        </ul>
                    </div>
                `,
                badCode: `FROM golang:1.19

WORKDIR /app
COPY . .
RUN go build -o myapp main.go

CMD ["./myapp"]
# çµæœ: 800MBè¶… (Goã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã”ã¨ã™ã‚‹ãŸã‚)`,
                goodCode: `# 1. ãƒ“ãƒ«ãƒ‰ç”¨ã‚¹ãƒ†ãƒ¼ã‚¸ (builderã¨ã„ã†åå‰ã‚’ã¤ã‘ã‚‹)
FROM golang:1.19 AS builder
WORKDIR /app
COPY . .
RUN go build -o myapp main.go

# 2. å®Ÿè¡Œç”¨ã‚¹ãƒ†ãƒ¼ã‚¸ (Alpineãªã©ã®è¶…è»½é‡OS)
FROM alpine:latest
WORKDIR /root/
# builderã‚¹ãƒ†ãƒ¼ã‚¸ã‹ã‚‰æˆæœç‰©ã ã‘ã‚’ã‚³ãƒ”ãƒ¼
COPY --from=builder /app/myapp .

CMD ["./myapp"]
# çµæœ: ç´„10MB (ãƒã‚¤ãƒŠãƒªã¨æœ€å°é™ã®OSã®ã¿)`,
                impact: "ã‚µã‚¤ã‚º: 800MB â†’ 10MB (ç´„98%å‰Šæ¸›)"
            },
            {
                id: "layer-caching",
                title: "Layer Caching Optimization",
                subtitle: "ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’æ¥µé™ã¾ã§çŸ­ç¸®",
                tags: ["Node.js", "Python", "Ruby", "Speed"],
                description: `
                    <p class="mb-4">
                        Dockerã¯ä¸Šã‹ã‚‰é †ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€å¤‰æ›´ãŒãªã„è¡Œã¯ã€Œã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€ã‚’ä½¿ã„ã¾ã™ã€‚<br>
                        ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã™ã‚‹ãŸã³ã«ã€é‡ãŸã„ <code>npm install</code> ã‚„ <code>pip install</code> ãŒèµ°ã‚Šç›´ã™ã®ã¯æ™‚é–“ã®ç„¡é§„ã§ã™ã€‚
                    </p>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
                        <h4 class="font-bold text-blue-700">ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <ul class="list-disc list-inside text-sm text-blue-800">
                            <li>é »ç¹ã«å¤‰æ›´ã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼‰ã¯ã€ãªã‚‹ã¹ãå¾Œã«è¨˜è¿°ã™ã‚‹ã€‚</li>
                            <li>æ»…å¤šã«å¤‰æ›´ã•ã‚Œãªã„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆpackage.jsonãªã©ï¼‰ã‚’å…ˆã«ã‚³ãƒ”ãƒ¼ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚</li>
                        </ul>
                    </div>
                `,
                badCode: `FROM node:18

WORKDIR /app

# ã‚½ãƒ¼ã‚¹ã‚‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å…¨éƒ¨ä¸€æ°—ã«ã‚³ãƒ”ãƒ¼
COPY . .

# ã‚½ãƒ¼ã‚¹ã‚’1æ–‡å­—å¤‰ãˆãŸã ã‘ã§ã€ã“ã“ã‚‚å†å®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã†ï¼
RUN npm install

CMD ["node", "index.js"]`,
                goodCode: `FROM node:18

WORKDIR /app

# 1. ã¾ãšä¾å­˜é–¢ä¿‚å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’ã‚³ãƒ”ãƒ¼
COPY package.json package-lock.json ./

# 2. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (ã“ã“ã¯package.jsonãŒå¤‰ã‚ã‚‰ãªã„é™ã‚Šã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ï¼)
RUN npm install

# 3. ãã®å¾Œã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼
COPY . .

CMD ["node", "index.js"]`,
                impact: "2å›ç›®ä»¥é™ã®ãƒ“ãƒ«ãƒ‰æ™‚é–“: 3åˆ† â†’ 1ç§’"
            },
            {
                id: "security-user",
                title: "Non-root User",
                subtitle: "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®åŸºæœ¬",
                tags: ["Security", "General"],
                description: `
                    <p class="mb-4">
                        ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ <code>root</code> æ¨©é™ã§å‹•ãã¾ã™ã€‚<br>
                        ã‚‚ã—ã‚³ãƒ³ãƒ†ãƒŠã«è„†å¼±æ€§ãŒã‚ã‚Šä¹—ã£å–ã‚‰ã‚ŒãŸå ´åˆã€ãƒ›ã‚¹ãƒˆOSã¸ã®æ·±åˆ»ãªæ”»æ’ƒã«ã¤ãªãŒã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚
                    </p>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
                        <h4 class="font-bold text-blue-700">ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <ul class="list-disc list-inside text-sm text-blue-800">
                            <li>å…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã¯å¤šãã®å ´åˆã€å°‚ç”¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆnodeãƒ¦ãƒ¼ã‚¶ãƒ¼ãªã©ï¼‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚</li>
                            <li>ã¾ãŸã¯ <code>useradd</code> ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œã‚Šã€<code>USER</code> å‘½ä»¤ã§åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚</li>
                        </ul>
                    </div>
                `,
                badCode: `FROM node:18

WORKDIR /app
COPY . .
RUN npm install

# æŒ‡å®šãŒãªã„ã®ã§ root ã§å®Ÿè¡Œã•ã‚Œã‚‹
CMD ["node", "index.js"]`,
                goodCode: `FROM node:18

WORKDIR /app

COPY package*.json ./
RUN npm install
COPY . .

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ node ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ‡ã‚Šæ›¿ãˆ
# (Nodeå…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã¯æœ€åˆã‹ã‚‰ node ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã„ã‚‹)
USER node

CMD ["node", "index.js"]`,
                impact: "ä¸‡ãŒä¸€ã®ä¾µå®³æ™‚ã®è¢«å®³ç¯„å›²ã‚’å¤§å¹…ã«é™å®š"
            },
            {
                id: "distroless",
                title: "Use Distroless",
                subtitle: "æ”»æ’ƒè€…ãŒä½¿ãˆã‚‹é“å…·ã‚’æ¶ˆã™",
                tags: ["Security", "Size", "Advanced"],
                description: `
                    <p class="mb-4">
                        GoogleãŒæä¾›ã™ã‚‹ã€ŒDistrolessã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€ã‚¢ãƒ—ãƒªã®å®Ÿè¡Œã«å¿…è¦ãªæœ€å°é™ã®ã‚‚ã®ã—ã‹å…¥ã£ã¦ã„ã¾ã›ã‚“ã€‚<br>
                        <strong>ã‚·ã‚§ãƒ« (bash/sh) ã™ã‚‰å…¥ã£ã¦ã„ãªã„</strong>ãŸã‚ã€æ”»æ’ƒè€…ãŒä¾µå…¥ã—ã¦ã‚‚ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒæ¥µã‚ã¦å›°é›£ã«ãªã‚Šã¾ã™ã€‚
                    </p>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
                        <h4 class="font-bold text-blue-700">ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <ul class="list-disc list-inside text-sm text-blue-800">
                            <li>è»½é‡åŒ–ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ç©¶æ¥µå½¢ã€‚</li>
                            <li>ãƒ‡ãƒãƒƒã‚°ï¼ˆã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«å…¥ã£ã¦ç¢ºèªï¼‰ã‚‚é›£ã—ããªã‚‹ãŸã‚ã€æœ¬ç•ªç’°å¢ƒå‘ã‘ã€‚</li>
                        </ul>
                    </div>
                `,
                badCode: `FROM python:3.9

WORKDIR /app
COPY . .
# ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ãŒãŸãã•ã‚“å…¥ã£ã¦ã„ã‚‹ãŒã€æ”»æ’ƒè€…ã«ã¨ã£ã¦ã‚‚ä¾¿åˆ©
CMD ["python", "app.py"]`,
                goodCode: `# ãƒ“ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¸
FROM python:3.9 AS builder
WORKDIR /app
COPY . .
# å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ‰€å®šã®å ´æ‰€ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãªã©...

# å®Ÿè¡Œã‚¹ãƒ†ãƒ¼ã‚¸: Distroless
FROM gcr.io/distroless/python3
COPY --from=builder /app /app
WORKDIR /app

# ã‚·ã‚§ãƒ«ãŒãªã„ã®ã§ã€ã“ã‚Œä»¥å¤–ä½•ã‚‚ã§ããªã„
CMD ["app.py"]`,
                impact: "æ”»æ’ƒå¯¾è±¡é ˜åŸŸ(Attack Surface)ã®æ¥µå°åŒ–"
            },
            {
                id: "env-vars",
                title: "Handling Secrets",
                subtitle: "æ©Ÿå¯†æƒ…å ±ã‚’ç„¼ãè¾¼ã¾ãªã„",
                tags: ["Security", "Config"],
                description: `
                    <p class="mb-4">
                        APIã‚­ãƒ¼ã‚„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’Dockerfileå†…ã® <code>ENV</code> ã‚„ã‚³ãƒ¼ãƒ‰ã«ç›´æ¥æ›¸ãã®ã¯å³ç¦ã§ã™ã€‚<br>
                        <code>docker history</code> ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ãˆã°ã€éå»ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å«ã¾ã‚Œã‚‹æƒ…å ±ã¯èª°ã§ã‚‚è¦‹ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚
                    </p>
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
                        <h4 class="font-bold text-blue-700">ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <ul class="list-disc list-inside text-sm text-blue-800">
                            <li>æ©Ÿå¯†æƒ…å ±ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã§ã¯ãªãã€<strong>å®Ÿè¡Œæ™‚</strong>ã«ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦æ³¨å…¥ã™ã‚‹ã€‚</li>
                            <li>ãƒ“ãƒ«ãƒ‰æ™‚ã«å¿…è¦ãªå ´åˆã¯ã€Dockerã® <code>--secret</code> æ©Ÿèƒ½ã‚’ä½¿ã†ï¼ˆä¸Šç´šç·¨ï¼‰ã€‚</li>
                        </ul>
                    </div>
                `,
                badCode: `FROM node:18

# çµ¶å¯¾ã«ã‚„ã£ã¦ã¯ã„ã‘ãªã„ï¼
ENV DB_PASSWORD=my_super_secret_password
ENV API_KEY=123456789

COPY . .
CMD ["node", "index.js"]`,
                goodCode: `FROM node:18

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒå¿…è¦ãªã‚‰æ›¸ã„ã¦ã‚‚ã„ã„ãŒã€æ©Ÿå¯†æƒ…å ±ã¯æ›¸ã‹ãªã„
ENV PORT=8080

COPY . .

# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã©ã¯ã€å®Ÿè¡Œæ™‚(docker run)ã«
# -e DB_PASSWORD=xxx ã§æ¸¡ã™ã‹ã€
# k8sã®Secretæ©Ÿèƒ½ãªã©ã‚’ä½¿ã£ã¦æ³¨å…¥ã™ã‚‹
CMD ["node", "index.js"]`,
                impact: "æƒ…å ±æ¼æ´©ãƒªã‚¹ã‚¯ã®å›é¿"
            }
        ];

        let currentPracticeId = null;

        // --- FUNCTIONS ---

        function renderNav() {
            const navList = document.getElementById('nav-list');
            navList.innerHTML = '';

            practices.forEach(practice => {
                const btn = document.createElement('button');
                btn.className = `nav-item w-full text-left px-4 py-3 rounded hover:bg-slate-50 transition-all group`;
                btn.onclick = () => loadContent(practice.id);
                
                // Active state check
                if (practice.id === currentPracticeId) {
                    btn.classList.add('active');
                } else {
                    btn.classList.add('text-slate-600');
                }

                // Tag generation
                const tagHtml = practice.tags.map(t => 
                    `<span class="text-[10px] bg-slate-200 text-slate-600 px-1.5 py-0.5 rounded mr-1">${t}</span>`
                ).join('');

                btn.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div class="font-bold text-sm mb-1 group-hover:text-amber-700 transition-colors">${practice.title}</div>
                    </div>
                    <div class="text-xs opacity-80 mb-2 truncate">${practice.subtitle}</div>
                    <div class="flex flex-wrap gap-1">${tagHtml}</div>
                `;
                navList.appendChild(btn);
            });
        }

        function loadContent(id) {
            currentPracticeId = id;
            renderNav(); // Re-render to update active state

            const data = practices.find(p => p.id === id);
            const content = document.getElementById('main-content');

            // Construct Code Block HTML safely
            const badCodeHtml = escapeHtml(data.badCode);
            const goodCodeHtml = escapeHtml(data.goodCode);

            content.innerHTML = `
                <div class="max-w-4xl mx-auto animate-fade-in">
                    <!-- Title Header -->
                    <div class="mb-8 border-b border-slate-200 pb-4">
                        <div class="flex items-center space-x-3 mb-2">
                            <h2 class="text-3xl font-bold text-slate-800">${data.title}</h2>
                            ${data.tags.map(t => `<span class="bg-amber-100 text-amber-800 text-xs font-bold px-2 py-1 rounded-full">${t}</span>`).join('')}
                        </div>
                        <p class="text-xl text-slate-500">${data.subtitle}</p>
                    </div>

                    <!-- Description -->
                    <div class="prose text-slate-600 mb-8">
                        ${data.description}
                    </div>

                    <!-- Comparison Section -->
                    <div class="grid lg:grid-cols-2 gap-6 mb-8">
                        <!-- Bad Pattern -->
                        <div class="bg-red-50 rounded-xl border border-red-200 overflow-hidden flex flex-col">
                            <div class="bg-red-100 px-4 py-2 border-b border-red-200 flex justify-between items-center">
                                <span class="font-bold text-red-800 text-sm">âŒ Bad Pattern</span>
                                <span class="text-xs text-red-600">éæ¨å¥¨</span>
                            </div>
                            <div class="p-4 overflow-x-auto flex-grow bg-[#fff5f5]">
                                <pre class="font-mono text-xs text-slate-700 whitespace-pre-wrap">${badCodeHtml}</pre>
                            </div>
                        </div>

                        <!-- Good Pattern -->
                        <div class="bg-green-50 rounded-xl border border-green-200 overflow-hidden shadow-md flex flex-col">
                            <div class="bg-green-100 px-4 py-2 border-b border-green-200 flex justify-between items-center">
                                <span class="font-bold text-green-800 text-sm">âœ… Best Practice</span>
                                <span class="text-xs text-green-600 font-bold">æ¨å¥¨</span>
                            </div>
                            <div class="p-4 overflow-x-auto flex-grow bg-white">
                                <pre class="font-mono text-xs text-slate-800 whitespace-pre-wrap">${goodCodeHtml}</pre>
                            </div>
                        </div>
                    </div>

                    <!-- Impact Box -->
                    <div class="bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl shadow-lg flex items-center justify-between">
                        <div>
                            <h4 class="text-xs text-slate-300 uppercase tracking-wider font-bold mb-1">Impact</h4>
                            <p class="text-lg font-bold text-amber-400">${data.impact}</p>
                        </div>
                        <div class="text-3xl">ğŸš€</div>
                    </div>
                </div>
            `;
            
            // Scroll to top
            content.scrollTop = 0;
        }

        // Utility to prevent HTML injection in code blocks
        function escapeHtml(text) {
            return text
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // Add simple fade-in animation
        document.head.insertAdjacentHTML("beforeend", `<style>.animate-fade-in { animation: fadeIn 0.3s ease-in-out; } @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }</style>`)

        // --- INIT ---
        window.onload = () => {
            renderNav();
            // Load first item by default
            if(practices.length > 0) {
                loadContent(practices[0].id);
            }
        };

    </script>
</body>
</html>